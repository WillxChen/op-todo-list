(()=>{"use strict";const t=(t,e)=>{const a=[{title:1234,id:1},{title:45687,id:2}],n={getTaskById:(t,e)=>t.find((t=>t.id===e)),createTask:(t,e)=>(t.push({id:crypto.randomUUID().slice(0,8),title:e}),t[t.length-1]),updateTask:(t,e,a)=>{const n=t.findIndex((t=>t.id===e));t[n]={...t[n],...a}}};return{getTitle:()=>t,getId:()=>e,getTasks:()=>a,createTask:t=>n.createTask(a,t),updateTask:(t,e)=>n.updateTask(a,t,e),getTaskById:t=>n.getTaskById(a,t)}},e=()=>{const t=[];return{getLists:()=>t,addList:e=>t.push(e),findList:e=>{const a=t.findIndex((t=>t.id===e));return t[a]}}};function a(t){const{target:e,tagName:a,classList:n,textContent:s,attributes:r}=t,d=document.querySelector(e),i=document.createElement(a);if("string"==typeof n?i.classList.add(n):Array.isArray(n)&&i.classList.add(...n),s&&(i.textContent=s),Array.isArray(r)){const[t,e]=r;i.setAttribute(t,e)}d.appendChild(i)}const{createTaskElements:n,renderTaskElements:s}={createTaskElements:(t,e)=>t.map((t=>{const a=document.createElement("div");a.className="task",a.dataset.id=t.id;const n=document.createElement("p");return n.textContent=t.title,a.appendChild(n),a.addEventListener("click",(a=>{((t,e,a)=>{const n=t.target,s=n.cloneNode(!0),r=document.createElement("input"),d=a.getTaskById(e);r.value=d.title,n.replaceWith(r),r.addEventListener("keydown",(t=>{"Enter"===t.key&&r.blur()})),r.addEventListener("blur",(()=>{a.updateTask(e,{title:r.value}),s.textContent=r.value,r.replaceWith(s)}),{once:!0}),r.focus()})(a,t.id,e)})),a})),renderTaskElements:(t,e)=>{t.append(...e)}},r=e(),d={renderListElements:t=>{t.forEach((t=>{const e=t.getId();(t=>{a({target:".list-container",tagName:"div",classList:["list"],attributes:["data-id",t]})})(e),((t,e)=>{const r=document.querySelector(`[data-id="${e}"]`);a({target:`[data-id="${e}"]`,tagName:"h2",textContent:t.getTitle()}),document.querySelector(`[data-id="${e}"]`).appendChild(((t,e)=>{const a=document.createElement("form");a.className="task-form";const r=document.createElement("input");return r.className="task-input",a.appendChild(r),r.addEventListener("keydown",(a=>{if("Enter"===a.key){a.preventDefault();const d=a.target.value,i=e.createTask(d),c=n([i],e);s(t.querySelector(".task-container"),c),r.value=""}})),a})(r,t))})(t,e),(t=>{a({target:`[data-id="${t}"]`,tagName:"div",classList:"task-container"})})(e),((t,e)=>{const a=document.querySelector(`[data-id="${e}"]`).querySelector(".task-container"),r=n(t.getTasks(),t);s(a,r)})(t,e)}))}},i=(()=>{const e=document.querySelector("#list-input");return{init:()=>{const a=r.getLists();a.length&&d.renderListElements(a),e.addEventListener("keydown",(a=>{if("Enter"===a.key){a.preventDefault();const n=a.target.value,s=crypto.randomUUID().slice(0,8),i=t(n,s);r.addList(i),d.renderListElements([i]),e.value=""}}))}}})();e().getLists(),i.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQWMsRUF1Qi9EeUQsQ0FBMkJ6RCxFQUFNRSxHQXBCVCxDQUFDQSxJQUMzQkUsRUFBb0IsQ0FDbEJFLE9BQVEsYUFBYUosTUFDckJLLFFBQVMsTUFDVEMsVUFBVyxrQkFDWCxFQWdCQWtELENBQW9CeEQsR0FiRyxFQUFDRixFQUFNRSxLQUNoQyxNQUNNeUQsRUFEYy9DLFNBQVNDLGNBQWMsYUFBYVgsT0FDdEJXLGNBQWMsbUJBQzFDK0MsRUFBZXJDLEVBQW1CdkIsRUFBS0osV0FBWUksR0FDekR3QixFQUFtQm1DLEVBQWVDLEVBQWEsRUFVN0NDLENBQW1CN0QsRUFBTUUsRUFBTyxHQUdoQyxHRC9DTixFQTlCNEIsTUFDMUIsTUFBTWtDLEVBQVF4QixTQUFTQyxjQUFjLGVBMEJyQyxNQUFPLENBQUVpRCxLQXhCSSxLQUNYLE1BQU1yQyxFQUFjb0IsRUFBZS9DLFdBQy9CMkIsRUFBWXBDLFFBQ2R5RCxFQUFhQyxtQkFBbUJ0QixHQUlsQ1csRUFBTUwsaUJBQWlCLFdBQVlDLElBQ2pDLEdBQWMsVUFBVkEsRUFBRU8sSUFBaUIsQ0FDckJQLEVBQUVxQixpQkFFRixNQUFNOUUsRUFBUXlELEVBQUUxQixPQUFPYyxNQUNqQjVDLEVBQUtVLE9BQU9DLGFBQWFDLE1BQU0sRUFBRyxHQUNsQzJFLEVBQVUsRUFBS3hGLEVBQU9DLEdBRzVCcUUsRUFBZTlDLFFBQVFnRSxHQUN2QmpCLEVBQWFDLG1CQUFtQixDQUFDZ0IsSUFFakMzQixFQUFNaEIsTUFBUSxFQUNoQixJQUNBLEVBSUwsRUE1QjJCLEdFSEwsSUFDWXRCLFdBRXhCLEVBQ1JnRSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3AtdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvVGFza01hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vb3AtdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvTGlzdC5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9Qcm9qZWN0LmpzIiwid2VicGFjazovL29wLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL2FwcGVuZEN1c3RvbUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vb3AtdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvVGFza1JlbmRlcmVyLmpzIiwid2VicGFjazovL29wLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL1VJSGFuZGxlci5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9MaXN0UmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vb3AtdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIFxyXG4gIEVhY2ggTGlzdCB3aWxsIGhhdmUgYSBidXR0b24gdGhhdCBleHBhbmRzIGEgVGFzayBpbnB1dCBmaWVsZFxyXG4gIFRhc2tzIHdpbGwgdGhlbiBiZSBwdXNoZWQgdG8gdGhlIExpc3QgVGFzayBhcnJheVxyXG4gIENSVURcclxuKi9cclxuXHJcbmNvbnN0IFRhc2tNYW5hZ2VyID0gKCkgPT4ge1xyXG4gIGNvbnN0IGdldFRhc2tCeUlkID0gKHRhc2tMaXN0LCB0YXNrSWQpID0+IHtcclxuICAgIHJldHVybiB0YXNrTGlzdC5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09PSB0YXNrSWQpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNyZWF0ZVRhc2sgPSAodGFza0xpc3QsIHRpdGxlKSA9PiB7XHJcbiAgICB0YXNrTGlzdC5wdXNoKHtcclxuICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCkuc2xpY2UoMCwgOCksXHJcbiAgICAgIHRpdGxlLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGFza0xpc3RbdGFza0xpc3QubGVuZ3RoIC0gMV07XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdXBkYXRlVGFzayA9ICh0YXNrTGlzdCwgdGFza0lkLCB1cGRhdGVkRW50cnkpID0+IHtcclxuICAgIGNvbnN0IHRhc2tJbmRleCA9IHRhc2tMaXN0LmZpbmRJbmRleCgodGFzaykgPT4gdGFzay5pZCA9PT0gdGFza0lkKTtcclxuICAgIHRhc2tMaXN0W3Rhc2tJbmRleF0gPSB7IC4uLnRhc2tMaXN0W3Rhc2tJbmRleF0sIC4uLnVwZGF0ZWRFbnRyeSB9O1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7IGdldFRhc2tCeUlkLCBjcmVhdGVUYXNrLCB1cGRhdGVUYXNrIH07XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUYXNrTWFuYWdlcjtcclxuIiwiaW1wb3J0IFRhc2tNYW5hZ2VyIGZyb20gXCIuL1Rhc2tNYW5hZ2VyXCI7XHJcblxyXG5jb25zdCBMaXN0ID0gKHRpdGxlLCBpZCkgPT4ge1xyXG4gIGNvbnN0IHRhc2tzID0gW1xyXG4gICAgeyB0aXRsZTogMTIzNCwgaWQ6IDEgfSxcclxuICAgIHsgdGl0bGU6IDQ1Njg3LCBpZDogMiB9LFxyXG4gIF07XHJcbiAgY29uc3QgdGFza01hbmFnZXIgPSBUYXNrTWFuYWdlcigpO1xyXG5cclxuICBjb25zdCBnZXRUaXRsZSA9ICgpID0+IHRpdGxlO1xyXG4gIGNvbnN0IGdldElkID0gKCkgPT4gaWQ7XHJcbiAgY29uc3QgZ2V0VGFza3MgPSAoKSA9PiB0YXNrcztcclxuXHJcbiAgY29uc3QgZ2V0VGFza0J5SWQgPSAodGFza0lkKSA9PiB7XHJcbiAgICByZXR1cm4gdGFza01hbmFnZXIuZ2V0VGFza0J5SWQodGFza3MsIHRhc2tJZCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY3JlYXRlVGFzayA9ICh0aXRsZSkgPT4ge1xyXG4gICAgcmV0dXJuIHRhc2tNYW5hZ2VyLmNyZWF0ZVRhc2sodGFza3MsIHRpdGxlKTtcclxuICB9O1xyXG5cclxuICBjb25zdCB1cGRhdGVUYXNrID0gKHRhc2tJZCwgdXBkYXRlZEVudHJ5KSA9PiB7XHJcbiAgICByZXR1cm4gdGFza01hbmFnZXIudXBkYXRlVGFzayh0YXNrcywgdGFza0lkLCB1cGRhdGVkRW50cnkpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlbW92ZVRhc2sgPSAoKSA9PiB7fTtcclxuXHJcbiAgcmV0dXJuIHsgZ2V0VGl0bGUsIGdldElkLCBnZXRUYXNrcywgY3JlYXRlVGFzaywgdXBkYXRlVGFzaywgZ2V0VGFza0J5SWQgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IExpc3Q7XHJcbiIsImNvbnN0IFByb2plY3QgPSAoKSA9PiB7XHJcbiAgY29uc3QgbGlzdHMgPSBbXTtcclxuXHJcbiAgY29uc3QgZ2V0TGlzdHMgPSAoKSA9PiBsaXN0cztcclxuICBjb25zdCBhZGRMaXN0ID0gKGxpc3QpID0+IGxpc3RzLnB1c2gobGlzdCk7XHJcbiAgY29uc3QgZmluZExpc3QgPSAobGlzdElkKSA9PiB7XHJcbiAgICBjb25zdCBsaXN0SW5kZXggPSBsaXN0cy5maW5kSW5kZXgoKGxpc3QpID0+IGxpc3QuaWQgPT09IGxpc3RJZCk7XHJcbiAgICByZXR1cm4gbGlzdHNbbGlzdEluZGV4XTtcclxuICB9O1xyXG5cclxuICByZXR1cm4geyBnZXRMaXN0cywgYWRkTGlzdCwgZmluZExpc3QgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFByb2plY3Q7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFwcGVuZEN1c3RvbUVsZW1lbnQob3B0aW9ucykge1xyXG4gIGNvbnN0IHsgdGFyZ2V0LCB0YWdOYW1lLCBjbGFzc0xpc3QsIHRleHRDb250ZW50LCBhdHRyaWJ1dGVzIH0gPSBvcHRpb25zO1xyXG5cclxuICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xyXG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xyXG4gIGlmICh0eXBlb2YgY2xhc3NMaXN0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NMaXN0KTtcclxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2xhc3NMaXN0KSkge1xyXG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzTGlzdCk7XHJcbiAgfVxyXG4gIGlmICh0ZXh0Q29udGVudCkge1xyXG4gICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHRleHRDb250ZW50O1xyXG4gIH1cclxuICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGVzKSkge1xyXG4gICAgY29uc3QgW2F0dHIsIHZhbHVlXSA9IGF0dHJpYnV0ZXM7XHJcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7XHJcbiAgfVxyXG4gIHRhcmdldEVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbn1cclxuIiwiY29uc3QgVGFza1JlbmRlcmVyID0gKCkgPT4ge1xyXG4gIGNvbnN0IHJlbmRlclRhc2tFbGVtZW50cyA9ICh0YXJnZXQsIHRhc2tzKSA9PiB7XHJcbiAgICB0YXJnZXQuYXBwZW5kKC4uLnRhc2tzKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBjcmVhdGVUYXNrRWxlbWVudHMgPSAodGFza3MsIGN1cnJlbnRMaXN0KSA9PiB7XHJcbiAgICByZXR1cm4gdGFza3MubWFwKCh0YXNrKSA9PiB7XHJcbiAgICAgIC8vIERpdiBjb250YWluZXJcclxuICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgZGl2LmNsYXNzTmFtZSA9IFwidGFza1wiO1xyXG4gICAgICBkaXYuZGF0YXNldC5pZCA9IHRhc2suaWQ7XHJcblxyXG4gICAgICAvLyBQYXJhZ3JhcGggZWxlbWVudFxyXG4gICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgIHAudGV4dENvbnRlbnQgPSB0YXNrLnRpdGxlO1xyXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQocCk7XHJcblxyXG4gICAgICAvLyBBZGQgb25jbGljayB0byBjaGFuZ2UgZWxlbWVudCB0byBpbnB1dCBvbiBjbGlja1xyXG4gICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgZWRpdFRhc2soZSwgdGFzay5pZCwgY3VycmVudExpc3QpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBkaXY7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBlZGl0VGFzayA9IChlLCB0YXNrSWQsIGN1cnJlbnRMaXN0KSA9PiB7XHJcbiAgICBjb25zdCBlbCA9IGUudGFyZ2V0O1xyXG4gICAgY29uc3QgcHJldmlvdXMgPSBlbC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuXHJcbiAgICBjb25zdCBjdXJyZW50VGFzayA9IGN1cnJlbnRMaXN0LmdldFRhc2tCeUlkKHRhc2tJZCk7XHJcbiAgICBpbnB1dC52YWx1ZSA9IGN1cnJlbnRUYXNrLnRpdGxlO1xyXG4gICAgZWwucmVwbGFjZVdpdGgoaW5wdXQpO1xyXG5cclxuICAgIGNvbnN0IHNhdmUgPSAoKSA9PiB7XHJcbiAgICAgIC8vIFNhdmUgdGhlIGlucHV0IHZhbHVlIGludG8gdGhlIHNlbGVjdGVkIHRhc2tcclxuICAgICAgY3VycmVudExpc3QudXBkYXRlVGFzayh0YXNrSWQsIHsgdGl0bGU6IGlucHV0LnZhbHVlIH0pO1xyXG4gICAgICBwcmV2aW91cy50ZXh0Q29udGVudCA9IGlucHV0LnZhbHVlO1xyXG4gICAgICBpbnB1dC5yZXBsYWNlV2l0aChwcmV2aW91cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICAgICAgaW5wdXQuYmx1cigpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBzYXZlLCB7XHJcbiAgICAgIG9uY2U6IHRydWUsXHJcbiAgICB9KTtcclxuICAgIGlucHV0LmZvY3VzKCk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHsgY3JlYXRlVGFza0VsZW1lbnRzLCByZW5kZXJUYXNrRWxlbWVudHMgfTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB7IGNyZWF0ZVRhc2tFbGVtZW50cywgcmVuZGVyVGFza0VsZW1lbnRzIH0gPSBUYXNrUmVuZGVyZXIoKTtcclxuIiwiaW1wb3J0IExpc3QgZnJvbSBcIi4vTGlzdC5qc1wiO1xyXG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9Qcm9qZWN0LmpzXCI7XHJcbmltcG9ydCBMaXN0UmVuZGVyZXIgZnJvbSBcIi4vTGlzdFJlbmRlcmVyLmpzXCI7XHJcblxyXG5jb25zdCBjdXJyZW50UHJvamVjdCA9IFByb2plY3QoKTtcclxuY29uc3QgbGlzdFJlbmRlcmVyID0gTGlzdFJlbmRlcmVyKCk7XHJcblxyXG5jb25zdCBsaXN0RWxlbWVudHNIYW5kbGVyID0gKCgpID0+IHtcclxuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlzdC1pbnB1dFwiKTtcclxuXHJcbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRMaXN0ID0gY3VycmVudFByb2plY3QuZ2V0TGlzdHMoKTtcclxuICAgIGlmIChjdXJyZW50TGlzdC5sZW5ndGgpIHtcclxuICAgICAgbGlzdFJlbmRlcmVyLnJlbmRlckxpc3RFbGVtZW50cyhjdXJyZW50TGlzdCk7XHJcbiAgICB9XHJcbiAgICAvLyBSZXBsYWNlIHdpdGggcmVuZGVyIGZ1bmN0aW9uIGxhdGVyXHJcbiAgICAvLyBCaW5kIGxpc3QgaW5wdXRcclxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBjb25zdCB0aXRsZSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGlkID0gY3J5cHRvLnJhbmRvbVVVSUQoKS5zbGljZSgwLCA4KTtcclxuICAgICAgICBjb25zdCBuZXdMaXN0ID0gTGlzdCh0aXRsZSwgaWQpO1xyXG5cclxuICAgICAgICAvLyBQdXNoIGxpc3QgaW50byBkYXRhYmFzZSBhbmQgdXBkYXRlIERPTVxyXG4gICAgICAgIGN1cnJlbnRQcm9qZWN0LmFkZExpc3QobmV3TGlzdCk7XHJcbiAgICAgICAgbGlzdFJlbmRlcmVyLnJlbmRlckxpc3RFbGVtZW50cyhbbmV3TGlzdF0pO1xyXG5cclxuICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7IGluaXQgfTtcclxufSkoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGxpc3RFbGVtZW50c0hhbmRsZXI7XHJcbiIsImltcG9ydCBhcHBlbmRDdXN0b21FbGVtZW50IGZyb20gXCIuL2FwcGVuZEN1c3RvbUVsZW1lbnQuanNcIjtcclxuaW1wb3J0IExpc3QgZnJvbSBcIi4vTGlzdC5qc1wiO1xyXG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9Qcm9qZWN0LmpzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVRhc2tFbGVtZW50cywgcmVuZGVyVGFza0VsZW1lbnRzIH0gZnJvbSBcIi4vVGFza1JlbmRlcmVyLmpzXCI7XHJcblxyXG4vLyBjb25zdCB7IGNyZWF0ZVRhc2tFbGVtZW50cywgcmVuZGVyVGFza0VsZW1lbnRzIH0gPSBUYXNrUmVuZGVyZXIoKTtcclxuXHJcbmNvbnN0IExpc3RSZW5kZXJlciA9ICgpID0+IHtcclxuICBjb25zdCBjcmVhdGVUYXNrRm9ybSA9ICh0YXJnZXQsIGxpc3QpID0+IHtcclxuICAgIC8vIENyZWF0ZSBmb3JtIGFuZCBhcHBlbmQgaW5wdXQgdG8gTGlzdFxyXG4gICAgY29uc3QgdGFza0Zvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTtcclxuICAgIHRhc2tGb3JtLmNsYXNzTmFtZSA9IFwidGFzay1mb3JtXCI7XHJcbiAgICBjb25zdCB0YXNrSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICB0YXNrSW5wdXQuY2xhc3NOYW1lID0gXCJ0YXNrLWlucHV0XCI7XHJcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZCh0YXNrSW5wdXQpO1xyXG5cclxuICAgIC8vIEJpbmQgaW5wdXQgbGlzdGVuZXIgdG8gbW9uaXRvciB0YXNrIGVudHJpZXNcclxuICAgIHRhc2tJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyB0YXNrIGVudHJ5XHJcbiAgICAgICAgY29uc3QgbmV3VGFzayA9IGxpc3QuY3JlYXRlVGFzayh0aXRsZSk7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGFuZCByZW5kZXIgdGFzayBlbGVtZW50c1xyXG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gY3JlYXRlVGFza0VsZW1lbnRzKFtuZXdUYXNrXSwgbGlzdCk7XHJcbiAgICAgICAgcmVuZGVyVGFza0VsZW1lbnRzKFxyXG4gICAgICAgICAgdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1jb250YWluZXJcIiksXHJcbiAgICAgICAgICB0YXNrRWxlbWVudFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRhc2tJbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRhc2tGb3JtO1xyXG4gIH07XHJcblxyXG4gIC8vIENyZWF0ZSBhbmQgYXBwZW5kIGEgbGlzdCBjb250YWluZXIgZWxlbWVudFxyXG4gIC8vIGFwcGVuZCh0YXJnZXQsIHRhZ05hbWUsIGNsYXNzTGlzdCwgdGV4dENvbnRlbnQsIGF0dHJpYnV0ZXMpXHJcbiAgY29uc3QgYXBwZW5kTGlzdENvbnRhaW5lciA9IChsaXN0SWQpID0+IHtcclxuICAgIGFwcGVuZEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICB0YXJnZXQ6IFwiLmxpc3QtY29udGFpbmVyXCIsXHJcbiAgICAgIHRhZ05hbWU6IFwiZGl2XCIsXHJcbiAgICAgIGNsYXNzTGlzdDogW1wibGlzdFwiXSxcclxuICAgICAgYXR0cmlidXRlczogW1wiZGF0YS1pZFwiLCBsaXN0SWRdLFxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgYXBwZW5kTGlzdEFuZFRpdGxlRWxlbWVudHMgPSAobGlzdCwgbGlzdElkKSA9PiB7XHJcbiAgICBjb25zdCBsaXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWlkPVwiJHtsaXN0SWR9XCJdYCk7XHJcbiAgICBhcHBlbmRDdXN0b21FbGVtZW50KHtcclxuICAgICAgdGFyZ2V0OiBgW2RhdGEtaWQ9XCIke2xpc3RJZH1cIl1gLFxyXG4gICAgICB0YWdOYW1lOiBcImgyXCIsXHJcbiAgICAgIHRleHRDb250ZW50OiBsaXN0LmdldFRpdGxlKCksXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBsaXN0RGF0YUlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtaWQ9XCIke2xpc3RJZH1cIl1gKTtcclxuICAgIGxpc3REYXRhSWQuYXBwZW5kQ2hpbGQoY3JlYXRlVGFza0Zvcm0obGlzdEVsZW1lbnQsIGxpc3QsIGxpc3RJZCkpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGFwcGVuZFRhc2tDb250YWluZXIgPSAobGlzdElkKSA9PiB7XHJcbiAgICBhcHBlbmRDdXN0b21FbGVtZW50KHtcclxuICAgICAgdGFyZ2V0OiBgW2RhdGEtaWQ9XCIke2xpc3RJZH1cIl1gLFxyXG4gICAgICB0YWdOYW1lOiBcImRpdlwiLFxyXG4gICAgICBjbGFzc0xpc3Q6IFwidGFzay1jb250YWluZXJcIixcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGFwcGVuZFRhc2tFbGVtZW50cyA9IChsaXN0LCBsaXN0SWQpID0+IHtcclxuICAgIGNvbnN0IGxpc3RFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtaWQ9XCIke2xpc3RJZH1cIl1gKTtcclxuICAgIGNvbnN0IHRhc2tDb250YWluZXIgPSBsaXN0RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stY29udGFpbmVyXCIpO1xyXG4gICAgY29uc3QgdGFza0VsZW1lbnRzID0gY3JlYXRlVGFza0VsZW1lbnRzKGxpc3QuZ2V0VGFza3MoKSwgbGlzdCk7XHJcbiAgICByZW5kZXJUYXNrRWxlbWVudHModGFza0NvbnRhaW5lciwgdGFza0VsZW1lbnRzKTtcclxuICB9O1xyXG5cclxuICBjb25zdCByZW5kZXJMaXN0RWxlbWVudHMgPSAobGlzdHMpID0+IHtcclxuICAgIGxpc3RzLmZvckVhY2goKGxpc3QpID0+IHtcclxuICAgICAgY29uc3QgbGlzdElkID0gbGlzdC5nZXRJZCgpO1xyXG5cclxuICAgICAgYXBwZW5kTGlzdENvbnRhaW5lcihsaXN0SWQpO1xyXG4gICAgICBhcHBlbmRMaXN0QW5kVGl0bGVFbGVtZW50cyhsaXN0LCBsaXN0SWQpO1xyXG4gICAgICBhcHBlbmRUYXNrQ29udGFpbmVyKGxpc3RJZCk7XHJcbiAgICAgIGFwcGVuZFRhc2tFbGVtZW50cyhsaXN0LCBsaXN0SWQpO1xyXG5cclxuICAgICAgLy8gTm93IHJlbmRlciBhbmQgYXBwZW5kIHRoZSB0YXNrIGVsZW1lbnRzXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICByZXR1cm4geyByZW5kZXJMaXN0RWxlbWVudHMgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IExpc3RSZW5kZXJlcjtcclxuIiwiaW1wb3J0IFRhc2tNYW5hZ2VyIGZyb20gXCIuL21vZHVsZXMvVGFza01hbmFnZXIuanNcIjtcclxuaW1wb3J0IFVpTWFuYWdlciBmcm9tIFwiLi9tb2R1bGVzL1VJSGFuZGxlci5qc1wiO1xyXG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9tb2R1bGVzL1Byb2plY3QuanNcIjtcclxuXHJcbmNvbnN0IGN1cnJlbnRQcm9qZWN0ID0gUHJvamVjdCgpO1xyXG5jb25zdCBsaXN0U3RvcmFnZSA9IGN1cnJlbnRQcm9qZWN0LmdldExpc3RzKCk7XHJcblxyXG5jb25zdCBVSSA9IFVpTWFuYWdlcjtcclxuVUkuaW5pdCgpO1xyXG5cclxuLy8gY29uc3QgTGlzdFVwZGF0ZXIgPSAoKCkgPT4ge1xyXG4vLyAgIGNvbnN0IGxpc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5saXN0c1wiKTtcclxuXHJcbi8vICAgY29uc3QgdXBkYXRlID0gKCkgPT4ge1xyXG4vLyAgICAgbGlzdHMuaW5uZXJIVE1MID0gXCJcIjtcclxuLy8gICAgIGxpc3RTdG9yYWdlLmZvckVhY2goKGxpc3QpID0+IHtcclxuLy8gICAgICAgbGlzdHMuaW5uZXJIVE1MICs9IGA8bGk+JHtsaXN0LmdldFRpdGxlKCl9PC9saT5gO1xyXG4vLyAgICAgfSk7XHJcbi8vICAgfTtcclxuLy8gICByZXR1cm4geyB1cGRhdGUgfTtcclxuLy8gfSkoKTtcclxuXHJcbi8vIGNvbnN0IExpc3RSZW5kZXJlciA9ICgoKSA9PiB7XHJcbi8vICAgY29uc3QgbGlzdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGlzdC1jb250YWluZXJcIik7XHJcblxyXG4vLyAgIC8vIENyZWF0ZSBsaXN0XHJcblxyXG4vLyAgIC8vIFBhc3MgaW4gYXJyYXkgb2YgZWxlbWVudHMgdG8gYmUgcmVuZGVyZWQgaW4gdGhlIGxpc3QgY29udGFpbmVyXHJcblxyXG4vKiBOb3cgSSB3YW50IHRvIGxpbmsgaXQgdG8gdGhlIFVJXHJcbiAgRm9ybSBJbnB1dCB0byBjcmVhdGUgYSBuZXcgTGlzdFxyXG4gIG5ldyBMaXN0IHdpbGwgY29udGFpbiBhbiBpbnB1dCB0byBjcmVhdGUgYSBuZXcgVGFza1xyXG4qL1xyXG5cclxuLyogVXBkYXRpbmcgVGFza1xyXG4gIEZvcm0gaW5wdXQgaW4gTGlzdFxyXG4gIFN1Ym1pdCBhIG5ldyBUYXNrIHRvIGxpc3RTdG9yYWdlW3hdLmNyZWF0ZVRhc2sodGFza0RldGFpbHMpO1xyXG5cclxuKi9cclxuIl0sIm5hbWVzIjpbInRpdGxlIiwiaWQiLCJ0YXNrcyIsInRhc2tNYW5hZ2VyIiwiZ2V0VGFza0J5SWQiLCJ0YXNrTGlzdCIsInRhc2tJZCIsImZpbmQiLCJ0YXNrIiwiY3JlYXRlVGFzayIsInB1c2giLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwic2xpY2UiLCJsZW5ndGgiLCJ1cGRhdGVUYXNrIiwidXBkYXRlZEVudHJ5IiwidGFza0luZGV4IiwiZmluZEluZGV4IiwiZ2V0VGl0bGUiLCJnZXRJZCIsImdldFRhc2tzIiwibGlzdHMiLCJnZXRMaXN0cyIsImFkZExpc3QiLCJsaXN0IiwiZmluZExpc3QiLCJsaXN0SWQiLCJsaXN0SW5kZXgiLCJhcHBlbmRDdXN0b21FbGVtZW50Iiwib3B0aW9ucyIsInRhcmdldCIsInRhZ05hbWUiLCJjbGFzc0xpc3QiLCJ0ZXh0Q29udGVudCIsImF0dHJpYnV0ZXMiLCJ0YXJnZXRFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhZGQiLCJBcnJheSIsImlzQXJyYXkiLCJhdHRyIiwidmFsdWUiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRhc2tFbGVtZW50cyIsInJlbmRlclRhc2tFbGVtZW50cyIsImN1cnJlbnRMaXN0IiwibWFwIiwiZGl2IiwiY2xhc3NOYW1lIiwiZGF0YXNldCIsInAiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImVsIiwicHJldmlvdXMiLCJjbG9uZU5vZGUiLCJpbnB1dCIsImN1cnJlbnRUYXNrIiwicmVwbGFjZVdpdGgiLCJrZXkiLCJibHVyIiwib25jZSIsImZvY3VzIiwiZWRpdFRhc2siLCJhcHBlbmQiLCJjdXJyZW50UHJvamVjdCIsImxpc3RSZW5kZXJlciIsInJlbmRlckxpc3RFbGVtZW50cyIsImZvckVhY2giLCJhcHBlbmRMaXN0Q29udGFpbmVyIiwibGlzdEVsZW1lbnQiLCJ0YXNrRm9ybSIsInRhc2tJbnB1dCIsInByZXZlbnREZWZhdWx0IiwibmV3VGFzayIsInRhc2tFbGVtZW50IiwiY3JlYXRlVGFza0Zvcm0iLCJhcHBlbmRMaXN0QW5kVGl0bGVFbGVtZW50cyIsImFwcGVuZFRhc2tDb250YWluZXIiLCJ0YXNrQ29udGFpbmVyIiwidGFza0VsZW1lbnRzIiwiYXBwZW5kVGFza0VsZW1lbnRzIiwiaW5pdCIsIm5ld0xpc3QiXSwic291cmNlUm9vdCI6IiJ9