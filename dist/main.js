(()=>{"use strict";var t={d:(e,s)=>{for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{ir:()=>f,$l:()=>k,vr:()=>v,eT:()=>L,rH:()=>h});const{appendCustomElement:s,createCustomElement:a}=(()=>{function t(t){const{tagName:e,classList:s,textContent:a,attributes:r}=t,n=document.createElement(e);if("string"==typeof s?n.classList.add(s):Array.isArray(s)&&n.classList.add(...s),a&&(n.textContent=a),Array.isArray(r)){const[t,e]=r;n.setAttribute(t,e)}return n}return{appendCustomElement:function(e){const{target:s}=e,a=document.querySelector(s),r=t(e);a.appendChild(r)},createCustomElement:t}})(),r=t=>{if(!t)return"";const e=new Date(t);return e.setHours(24,0,0,0),e.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"})},n=t=>{const e=t;return{createToolbar:()=>{const t=a({tagName:"div",classList:"toolbar"});return t.append((t=>{const e=document.createDocumentFragment();return t.forEach((t=>{const{name:s,imgSrc:r,className:n,onClick:i}=t,o=a({tagName:"button",attributes:["aria-label",`${s}`]}),c=a({tagName:"img",attributes:["src",`${r}`],classList:n});o.onclick=i,o.append(c),e.append(o)})),e})(e)),t}}},i=(()=>{const t={};return{getEvents:()=>t,subscribe:(e,s)=>{let a;return console.log(`Subscribing to ${e}`),t.hasOwnProperty(e)||(t[e]=[]),a=t[e].push(s)-1,{unsubscribe(){t[e].splice(a,1)}}},publish:(e,s={})=>(console.log(`Executing ${e}`),t.hasOwnProperty(e)?t[e].map((t=>t(s))):[])}})(),o=(t,e)=>{t.preventDefault();const s=t.target.closest("form"),a=s.parentNode,r=a.querySelector(".main-details");s.remove(),a.classList.remove("isEditable");const n=m(e);r.append(n)},c=(t,s)=>{const r=t=>{const s=document.createDocumentFragment(),r=a({tagName:"textarea",classList:"edit-title"});r.value=t.title,r.name="title",r.style.wordBreak="break-word",r.addEventListener("input",e.default,!1);const i=a({tagName:"textarea",classList:"edit-description",attributes:["placeholder","Add a description"]});i.value=t.description||"",i.name="description";const o=a({tagName:"input",attributes:["type","date"],classList:"edit-date"}),c=new Date;t.dueDate?o.value=t.dueDate:o.value="",o.name="dueDate",o.onclick=()=>{o.valueAsDate=o.valueAsDate=new Date(c.getFullYear(),c.getMonth(),c.getDate(),12)};const l=a({tagName:"select",classList:"edit-difficulty"});l.name="difficulty";const d=[{name:"Select a Difficulty",value:""},{name:"Easy",value:"Easy"},{name:"Medium",value:"Medium"},{name:"Hard",value:"Hard"}].map((e=>{const{name:s,value:r}=e,n=a({tagName:"option",textContent:s,attributes:["value",`${r}`]});return t.difficulty===r&&(n.selected=!0),n}));l.append(...d);const u=n(t);return s.append(r,i,o,l,u),s},n=()=>{const e=a({tagName:"div",classList:"form-controls"}),r=a({tagName:"button",classList:"submit-btn",textContent:"Submit"}),n=a({tagName:"button",classList:"cancel-btn",textContent:"Cancel"});return n.onclick=e=>o(e,t.getTaskById(s)),e.append(n,r),e};return{appendEditTaskForm:e=>{const a=(()=>{const e=document.createElement("form"),a=t.getTaskById(s);return e.id="edit-task",e.append(r(a)),e.addEventListener("submit",(e=>{((t,e,s)=>{t.preventDefault();const a=t.target,r=a.parentNode,n=r.querySelector(".main-details"),o=r.querySelector(".bottom-panel"),c=new FormData(a),l={};for(const[t,e]of c)l[t]=e;const d=e.updateTask(s.id,l);i.publish("taskUpdated",{list:e,task:d}),a.remove();const u=m(d);n.append(u),o.replaceChildren();const p=b(d);o.append(p),r.classList.remove("isEditable")})(e,t,a)})),e.addEventListener("keydown",(e=>{"Escape"===e.key&&o(e,t.getTaskById(s))})),e})();return e.append(a),a}}},l=(t,e)=>{const s=((t,e)=>({setEditMode:s=>{const a=s.target.closest(".task");if(a.classList.contains("isEditable"))return;const r=a.querySelector(".main-details");a.classList.add("isEditable"),r.replaceChildren(),a.classList.contains("expanded")&&(a.querySelector(".expanded-details").remove(),a.classList.remove("expanded"));const n=c(t,e.id).appendEditTaskForm(a);[...n.getElementsByTagName("textarea")].forEach((t=>{t.addEventListener("keydown",(t=>{if("Enter"===t.key&&!t.shiftKey){t.preventDefault();const e=new Event("submit",{bubbles:!0,cancelable:!0});n.dispatchEvent(e)}}))}))},setPriority:s=>{t.getTaskById(e.id).priority?(t.updateTask(e.id,{priority:!1}),s.target.closest("img").src="../src/imgs/noun-star-4485746.svg"):(t.updateTask(e.id,{priority:!0}),s.target.closest("img").src="../src/imgs/noun-star-4485827.svg"),s.target.closest(".task").classList.toggle("isPriority"),s.target.closest("img").classList.toggle("filter-gray"),s.target.closest("img").classList.toggle("filter-yellow")},deleteTask:s=>{t.removeTask(e.id),i.publish("taskDeleted",{list:t,task:e}),s.target.closest(".task").remove()}}))(t,e);return[{name:"Edit",imgSrc:"../src/imgs/noun-quill-4626718.svg",className:"filter-gray",onClick:t=>s.setEditMode(t)},{name:"Set Priority",imgSrc:"../src/imgs/noun-star-4485746.svg",className:"filter-gray",onClick:t=>s.setPriority(t)},{name:"Delete",imgSrc:"../src/imgs/noun-skull-4485674.svg",className:"filter-red",onClick:t=>s.deleteTask(t)}]};function d(t){console.log("Rendering task");const{list:e,task:s}=t;u(e,s)}i.subscribe("taskCreated",d),i.subscribe("taskReconstructed",d);const u=(t,e)=>{const s=document.querySelector(`[data-id="${t.getId()}"]`).querySelector(".tasks-container"),a=p(t,e);s.prepend(a)},p=(t,e)=>{const s=document.createElement("div");s.className="task",s.dataset.id=e.id;const a=n(l(t,e)).createToolbar(t,s),r=g(e),i=y(t,e.id);return s.append(a),s.append(r),s.append(i),s.addEventListener("dblclick",(s=>{L(s,e.id,t)})),s.addEventListener("click",(s=>{h(s,t,e.id)})),s.addEventListener("mouseover",(t=>{t.stopPropagation(),a.style.opacity="1",a.style.visibility="visible"})),s.addEventListener("mouseout",(()=>{a.style.opacity="0",a.style.visibility="hidden"})),s},g=t=>{const e=document.createElement("div");return e.classList.add("main-details"),e.appendChild(m(t)),e},m=t=>{const e=document.createDocumentFragment(),s=a({tagName:"p",classList:"task-title",textContent:t.title}),r=t.description?a({tagName:"p",classList:"task-description",textContent:t.description}):" ";return e.append(s,r),e},y=(t,e)=>{const s=t.getTaskById(e),r=a({tagName:"div",classList:"bottom-panel"});return r.append(b(s)),r},b=t=>{const e=document.createDocumentFragment(),s=a({tagName:"p",textContent:(t=>{switch(t){case"Easy":return"⚔️";case"Medium":return"⚔️⚔️";case"Hard":return"⚔️⚔️⚔️";default:return""}})(t.difficulty)}),n=a({tagName:"p",textContent:r(t.dueDate)||""});return e.append(n,s),e},k=(t,e)=>{if("Enter"===t.key){t.preventDefault();const s=t.target.value,a=e.createList(s);t.target.value="",i.publish("listCreated",a)}},v=(t,e)=>{if("Enter"===t.key){t.preventDefault();const s=t.target.value,a=e.createTask(s);t.target.value="",i.publish("taskCreated",{list:e,task:a})}};function f(){this.style.height="auto",this.style.height=this.scrollHeight+"px"}const L=(t,e,s)=>{const a=t.target;if(!a.classList.contains("task-title"))return;const r=a.cloneNode(!0),n=document.createElement("textarea"),i=s.getTaskById(e);n.classList.add("temp-input"),n.value=i.title,n.style.wordBreak="break-word",a.replaceWith(n),n.style.height="auto",n.style.height=n.scrollHeight+"px",n.addEventListener("keydown",(t=>{"Enter"===t.key&&n.blur()})),n.addEventListener("blur",(()=>{s.updateTask(e,{title:n.value}),r.textContent=n.value,n.replaceWith(r)}),{once:!0}),n.addEventListener("input",f,!1),n.focus()},h=(t,e,s)=>{if(t.target.classList.contains("isEditable")||!t.target.classList.contains("task"))return;const n=t.target,i=n.querySelector(".main-details"),o=n.querySelector(".expanded-details");o?(o.remove(),n.classList.remove("expanded")):(((t,e)=>{const s=(t=>{const{dueDate:e,difficulty:s}=t,n=document.createDocumentFragment(),i=document.createElement("div");return i.classList.add("expanded-details"),n.append(i),i.append(a({tagName:"p",classList:"due-date",textContent:r(e)})),i.append(a({tagName:"p",classList:"difficulty",textContent:s})),n})(e);t.after(s)})(i,e.getTaskById(s)),n.classList.add("expanded"))},E=(t,e)=>{const s=t.target,a=s.cloneNode(!0),r=document.createElement("textarea");r.classList.add("temp-input"),r.value=e.getTitle(),r.style.wordBreak="break-word",s.replaceWith(r),r.style.height="auto",r.style.height=r.scrollHeight+"px";const n=()=>{const t=e.setTitle(r.value);i.publish("listUpdated",{list:e,title:t}),a.textContent=r.value,r.replaceWith(a),a.addEventListener("dblclick",(t=>{E(t,e)}))};r.addEventListener("input",f,!1),r.focus(),r.addEventListener("blur",n,{once:!0}),r.addEventListener("keydown",(t=>{"Enter"===t.key&&r.blur(),"Escape"===t.key&&(r.removeEventListener("blur",n),r.replaceWith(a),a.addEventListener("dblclick",(t=>{E(t,e)})))}))},S=(()=>{let t=null;return{getCurrentProject:()=>t,setCurrentProject:e=>(console.log("Setting current project: "+e.getTitle()),t=e,i.publish("currentProjectSet",{title:e.getTitle(),id:e.getId()}),t)}})(),T=t=>{const e=(t=>({deleteList:e=>{const s=S.getCurrentProject().removeList(t.getId());i.publish("listDeleted",s),e.target.closest(".list").remove()}}))(t);return[{name:"Delete",imgSrc:"../src/imgs/noun-skull-4485674.svg",className:"filter-red",onClick:t=>e.deleteList(t)}]};function I(t){console.log("Rendering List"),C(t),D(t),N(t),x(t)}i.subscribe("listCreated",I),i.subscribe("listReconstructed",I);const C=t=>{s({target:".lists-container",tagName:"div",classList:["list"],attributes:["data-id",t.getId()]})},N=t=>{const e=document.querySelector(`[data-id="${t.getId()}"]`),s=a({tagName:"h2",classList:"list-title",textContent:t.getTitle()});s.addEventListener("dblclick",(e=>{E(e,t)})),e.append(s,j(t))},j=t=>{const e=document.createElement("form");e.className="task-form";const s=a({tagName:"input",classList:"task-input",attributes:["placeholder","Add a task"]});return e.appendChild(s),s.addEventListener("keydown",(e=>{v(e,t)})),e},x=t=>{s({target:`[data-id="${t.getId()}"]`,tagName:"div",classList:"tasks-container"})},D=t=>{const e=document.querySelector(`[data-id="${t.getId()}"]`),s=n(T(t)).createToolbar();e.append(s),e.addEventListener("mouseover",(()=>{s.style.opacity="1",s.style.visibility="visible"})),e.addEventListener("mouseout",(()=>{s.style.opacity="0",s.style.visibility="hidden"}))},P=(t,e=crypto.randomUUID().slice(0,8))=>{let s=t;const a=[],r=(t=>{const e=e=>t.findIndex((t=>t.id===e));return{getTaskById:e=>t.find((t=>t.id===e)),createTask:(e,s=crypto.randomUUID().slice(0,8))=>(t.push({id:s,title:e}),t[t.length-1]),updateTask:(s,a)=>{const r=e(s);return t[r]={...t[r],...a},t[r]},removeTask:s=>{const a=e(s);t.splice(a,1)}}})(a);return{getTitle:()=>s,setTitle:t=>s=t,getId:()=>e,getTasks:()=>a,createTask:(t,e)=>r.createTask(t,e),getTaskById:t=>r.getTaskById(t),updateTask:(t,e)=>r.updateTask(t,e),removeTask:t=>r.removeTask(t)}},w=(t,e=crypto.randomUUID().slice(0,8))=>{const s=[];return{getTitle:()=>t,getId:()=>e,getLists:()=>s,createList:(t,e)=>(s.push(P(t,e)),s[s.length-1]),removeList:t=>{const e=(t=>s.findIndex((e=>e.getId()===t)))(t),a=s[e];return s.splice(e,1),a}}},O=t=>{const e=localStorage.getItem(t);return JSON.parse(e)},q=(t,e)=>{e.map((e=>{const s=t.createList(e.title,e.id);i.publish("listReconstructed",s),B(s,e.tasks)}))},B=(t,e)=>{e.forEach((e=>{t.createTask(e.title,e.id);const s=t.updateTask(e.id,e);i.publish("taskReconstructed",{list:t,task:s})}))};i.subscribe("projectCreated",(function(t){const e=O("projects");e.push({title:t.getTitle(),id:t.getId(),lists:[]}),localStorage.setItem("projects",JSON.stringify(e))})),i.subscribe("listCreated",(function(t){const e=O("projects");e[U()].lists.push({title:t.getTitle(),id:t.getId(),tasks:[]}),localStorage.setItem("projects",JSON.stringify(e))})),i.subscribe("listUpdated",(function(t){const{list:e,title:s}=t,a=O("projects"),r=a[U()],n=$(e.getId());r.lists[n]={...r.lists[n],title:s},localStorage.setItem("projects",JSON.stringify(a))})),i.subscribe("listDeleted",(function(t){const{updatedProjects:e,storedList:s}=A(t.getId()),a=$(t.getId());s.splice(a,1),localStorage.setItem("projects",JSON.stringify(e))})),i.subscribe("taskCreated",(function(t){const{list:e,task:s}=t,a=O("projects");J(a,e.getId()).tasks.push(s),localStorage.setItem("projects",JSON.stringify(a))})),i.subscribe("taskUpdated",(function(t){const{list:e,task:s}=t,a=O("projects"),r=J(a,e.getId()).tasks,n=F(r,s.id);r[n]={...r[n],...s},localStorage.setItem("projects",JSON.stringify(a))})),i.subscribe("taskDeleted",(function(t){const{list:e,task:s}=t,a=O("projects"),r=J(a,e.getId()).tasks,n=F(r,s.id);r.splice(n,1),localStorage.setItem("projects",JSON.stringify(a))})),i.subscribe("currentProjectSet",(function(t){localStorage.setItem("currentProject",JSON.stringify(t))}));const J=(t,e)=>{const s=U(),a=$(e);return t[s].lists[a]},U=()=>{const t=O("projects"),e=O("currentProject");return t.findIndex((t=>t.id===e.id))},$=t=>O("projects")[U()].lists.findIndex((e=>e.id===t)),A=t=>{const e=O("projects");return{updatedProjects:e,storedList:e[U()].lists}},F=(t,e)=>t.findIndex((t=>t.id===e)),H=(()=>{const t=document.querySelector("#list-input");return{init:()=>{const e=S.getCurrentProject();t.addEventListener("keydown",(t=>{k(t,e)}))}}})();"projects"in localStorage||(console.log("Initialize projects array in storage"),localStorage.setItem("projects",JSON.stringify([]))),O("projects").length?S.setCurrentProject((()=>{const t=(()=>{const t=localStorage.getItem("projects");return JSON.parse(t)})()[U()],e=w(t.title,t.id);return i.publish("projectReconstructed",e),q(e,t.lists),e})()):(()=>{console.log("Creating default project");const t=w("Default");S.setCurrentProject(t),i.publish("projectCreated",t),(t=>{const e=t.createList("Habits"),s=e.createTask("Create your first habit!");i.publish("listCreated",e),i.publish("taskCreated",{list:e,task:s})})(t)})(),H.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TixLQVJJLEtBQ1gsTUFBTXRGLEVBQWlCLEVBQU00QixvQkFFN0JqQixFQUFNbEYsaUJBQWlCLFdBQVlqQixJQUNqQ3VGLEVBQVd2RixFQUFHd0YsRUFBZSxHQUM3QixFQUlMLEVBWnFCLEdEdURkLGFBQWNpRSxlQUNsQmxLLFFBQVFDLElBQUksd0NBQ1ppSyxhQUFhUSxRQUFRLFdBQVlOLEtBQUtPLFVBQVUsTUFFN0NYLEVBQWEsWUFBWVYsT0FLOUIsRUFBTXhCLGtCQUcwQixNQUNoQyxNQUVNMEQsRUF4QmtCLE1BQ3hCLE1BQU12QixFQUFlQyxhQUFhQyxRQUFRLFlBRTFDLE9BRHVCQyxLQUFLQyxNQUFNSixFQUNiLEVBbUJFd0IsR0FDRGIsS0FHaEJjLEVBQXVCLEVBQVFGLEVBQVlqSyxNQUFPaUssRUFBWTFJLElBS3BFLE9BSkEsRUFBT3pDLFFBQVEsdUJBQXdCcUwsR0FFdkNwQixFQUFtQm9CLEVBQXNCRixFQUFZN0IsT0FFOUMrQixDQUFvQixFQWJIQyxJRWxFRyxNQUMzQjNMLFFBQVFDLElBQUksNEJBQ1osTUFBTTJMLEVBQWlCLEVBQVEsV0FDL0IsRUFBTTlELGtCQUFrQjhELEdBRXhCLEVBQU92TCxRQUFRLGlCQUFrQnVMLEdWR1QsQ0FBQ0EsSUFDekIsTUFBTUMsRUFBWUQsRUFBZTVGLFdBQVcsVUFDdEM4RixFQUFZRCxFQUFVMUYsV0FBVyw0QkFDdkMsRUFBTzlGLFFBQVEsY0FBZXdMLEdBQzlCLEVBQU94TCxRQUFRLGNBQWUsQ0FBRTBDLEtBQU04SSxFQUFXbkwsS0FBTW9MLEdBQVksRVVObkVDLENBQWtCSCxFQUNHLEVGdURuQkksR0c3RE8sRUFDUlQsTSIsInNvdXJjZXMiOlsid2VicGFjazovL29wLXRvZG8tbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL29wLXRvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL29wLXRvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL29wLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL0hlbHBlcnMvY3VzdG9tRWxlbWVudEhlbHBlci5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9IZWxwZXJzL2Zvcm1hdERhdGVIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vb3AtdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvVG9vbGJhci9Ub29sYmFyLmpzIiwid2VicGFjazovL29wLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL3B1YlN1Yi5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9Gb3JtL0Zvcm1FdmVudEhhbmRsZXJzLmpzIiwid2VicGFjazovL29wLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL0Zvcm0vRm9ybVJlbmRlcmVyLmpzIiwid2VicGFjazovL29wLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL1Rvb2xiYXIvdGFza0NvbmZpZy5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9Ub29sYmFyL3Rhc2tiYXJFdmVudEhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vb3AtdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvTGlzdC90YXNrL1Rhc2tSZW5kZXJlci5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9FdmVudEhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vb3AtdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvTGlzdC9MaXN0SGFuZGxlci5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9zdG9yZS5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9Ub29sYmFyL2xpc3RDb25maWcuanMiLCJ3ZWJwYWNrOi8vb3AtdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvVG9vbGJhci9saXN0YmFyRXZlbnRIYW5kbGVyLmpzIiwid2VicGFjazovL29wLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL0xpc3QvTGlzdFJlbmRlcmVyLmpzIiwid2VicGFjazovL29wLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL0xpc3QvTGlzdC5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9MaXN0L3Rhc2svVGFza01hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vb3AtdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvUHJvamVjdC5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9sb2NhbFN0b3JhZ2VIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vb3AtdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvVXNlckludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9Qcm9qZWN0SGFuZGxlci5qcyIsIndlYnBhY2s6Ly9vcC10b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJjb25zdCBjdXN0b21FbGVtZW50SGVscGVyID0gKCkgPT4ge1xyXG4gIC8vIFBhc3MgaW4gYSBvYmplY3Qgb2YgeyBbdGFyZ2V0XS4sIHRhZ05hbWUsIGNsYXNzTGlzdCwgdGV4dENvbnRlbnQsIGF0dHJpYnV0ZXMgfVxyXG4gIGZ1bmN0aW9uIGFwcGVuZEN1c3RvbUVsZW1lbnQob3B0aW9ucykge1xyXG4gICAgY29uc3QgeyB0YXJnZXQgfSA9IG9wdGlvbnM7XHJcbiAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xyXG5cclxuICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVDdXN0b21FbGVtZW50KG9wdGlvbnMpO1xyXG4gICAgdGFyZ2V0RWxlbWVudC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbUVsZW1lbnQob3B0aW9ucykge1xyXG4gICAgY29uc3QgeyB0YWdOYW1lLCBjbGFzc0xpc3QsIHRleHRDb250ZW50LCBhdHRyaWJ1dGVzIH0gPSBvcHRpb25zO1xyXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBjbGFzc0xpc3QgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTGlzdCk7XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2xhc3NMaXN0KSkge1xyXG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4uY2xhc3NMaXN0KTtcclxuICAgIH1cclxuICAgIGlmICh0ZXh0Q29udGVudCkge1xyXG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dENvbnRlbnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGVzKSkge1xyXG4gICAgICBjb25zdCBbYXR0ciwgdmFsdWVdID0gYXR0cmlidXRlcztcclxuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgfVxyXG4gIHJldHVybiB7IGFwcGVuZEN1c3RvbUVsZW1lbnQsIGNyZWF0ZUN1c3RvbUVsZW1lbnQgfTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB7IGFwcGVuZEN1c3RvbUVsZW1lbnQsIGNyZWF0ZUN1c3RvbUVsZW1lbnQgfSA9XHJcbiAgY3VzdG9tRWxlbWVudEhlbHBlcigpO1xyXG4iLCJjb25zdCBmb3JtYXREYXRlID0gKGRhdGVTdHJpbmcpID0+IHtcclxuICBpZiAoIWRhdGVTdHJpbmcpIHtcclxuICAgIHJldHVybiBcIlwiO1xyXG4gIH1cclxuICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XHJcbiAgZGF0ZS5zZXRIb3VycygyNCwgMCwgMCwgMCk7XHJcblxyXG4gIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyhcImVuLVVTXCIsIHtcclxuICAgIG1vbnRoOiBcIjItZGlnaXRcIixcclxuICAgIGRheTogXCIyLWRpZ2l0XCIsXHJcbiAgICB5ZWFyOiBcIjItZGlnaXRcIixcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGZvcm1hdHRlZERhdGU7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmb3JtYXREYXRlO1xyXG4iLCJpbXBvcnQgeyBjcmVhdGVDdXN0b21FbGVtZW50IH0gZnJvbSBcIi4uL0hlbHBlcnMvY3VzdG9tRWxlbWVudEhlbHBlci5qc1wiO1xyXG5cclxuLy8gQ3JlYXRlIHRvb2xiYXIgd2lsbCByZXR1cm4gYSBmcmFnbWVudCBjb250YWluZXIgb2YgdGhyZWUgYnV0dG9uc1xyXG4vL1xyXG5cclxuY29uc3QgVG9vbGJhciA9IChjb25maWcpID0+IHtcclxuICBjb25zdCB0b29scyA9IGNvbmZpZztcclxuICBjb25zdCBjcmVhdGVUb29sYmFyID0gKCkgPT4ge1xyXG4gICAgY29uc3QgdG9vbGJhckNvbnRhaW5lciA9IGNyZWF0ZUN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICB0YWdOYW1lOiBcImRpdlwiLFxyXG4gICAgICBjbGFzc0xpc3Q6IFwidG9vbGJhclwiLFxyXG4gICAgfSk7XHJcbiAgICB0b29sYmFyQ29udGFpbmVyLmFwcGVuZChfX2NyZWF0ZUJ0bnModG9vbHMpKTtcclxuICAgIHJldHVybiB0b29sYmFyQ29udGFpbmVyO1xyXG4gIH07XHJcbiAgY29uc3QgX19jcmVhdGVCdG5zID0gKHRvb2xzKSA9PiB7XHJcbiAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgIHRvb2xzLmZvckVhY2goKHRvb2wpID0+IHtcclxuICAgICAgY29uc3QgeyBuYW1lLCBpbWdTcmMsIGNsYXNzTmFtZSwgb25DbGljayB9ID0gdG9vbDtcclxuICAgICAgLy8gVG9vbGJhciB3aWxsIGNvbnNpc3Qgb2Y6XHJcbiAgICAgIC8vIEVkaXRcclxuICAgICAgLy8gU2V0IFByaW9yaXR5IC0gaXNQcmlvcml0eVxyXG4gICAgICAvLyBEZWxldGVcclxuICAgICAgY29uc3QgYnRuID0gY3JlYXRlQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgdGFnTmFtZTogXCJidXR0b25cIixcclxuICAgICAgICBhdHRyaWJ1dGVzOiBbXCJhcmlhLWxhYmVsXCIsIGAke25hbWV9YF0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBpbWcgPSBjcmVhdGVDdXN0b21FbGVtZW50KHtcclxuICAgICAgICB0YWdOYW1lOiBcImltZ1wiLFxyXG4gICAgICAgIGF0dHJpYnV0ZXM6IFtcInNyY1wiLCBgJHtpbWdTcmN9YF0sXHJcbiAgICAgICAgY2xhc3NMaXN0OiBjbGFzc05hbWUsXHJcbiAgICAgIH0pO1xyXG4gICAgICBidG4ub25jbGljayA9IG9uQ2xpY2s7XHJcbiAgICAgIGJ0bi5hcHBlbmQoaW1nKTtcclxuICAgICAgZnJhZ21lbnQuYXBwZW5kKGJ0bik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmcmFnbWVudDtcclxuICB9O1xyXG5cclxuICByZXR1cm4geyBjcmVhdGVUb29sYmFyIH07XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUb29sYmFyO1xyXG4iLCJjb25zdCBwdWJTdWIgPSAoKCkgPT4ge1xyXG4gIGNvbnN0IGV2ZW50cyA9IHt9O1xyXG5cclxuICBjb25zdCBnZXRFdmVudHMgPSAoKSA9PiBldmVudHM7XHJcblxyXG4gIGNvbnN0IHN1YnNjcmliZSA9IChldmVudCwgY2FsbGJhY2spID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGBTdWJzY3JpYmluZyB0byAke2V2ZW50fWApO1xyXG4gICAgbGV0IGluZGV4O1xyXG5cclxuICAgIGlmICghZXZlbnRzLmhhc093blByb3BlcnR5KGV2ZW50KSkge1xyXG4gICAgICBldmVudHNbZXZlbnRdID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgaW5kZXggPSBldmVudHNbZXZlbnRdLnB1c2goY2FsbGJhY2spIC0gMTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1bnN1YnNjcmliZSgpIHtcclxuICAgICAgICBldmVudHNbZXZlbnRdLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHB1Ymxpc2ggPSAoZXZlbnQsIGRhdGEgPSB7fSkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYEV4ZWN1dGluZyAke2V2ZW50fWApO1xyXG4gICAgaWYgKCFldmVudHMuaGFzT3duUHJvcGVydHkoZXZlbnQpKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZXZlbnRzW2V2ZW50XS5tYXAoKGNhbGxiYWNrKSA9PiBjYWxsYmFjayhkYXRhKSk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHsgZ2V0RXZlbnRzLCBzdWJzY3JpYmUsIHB1Ymxpc2ggfTtcclxufSkoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHB1YlN1YjtcclxuIiwiaW1wb3J0IHtcclxuICBjcmVhdGVNYWluRGV0YWlsc0VsZW1lbnRzLFxyXG4gIGNyZWF0ZUJvdHRvbVBhbmVsRWxlbWVudHMsXHJcbn0gZnJvbSBcIi4uL0xpc3QvdGFzay9UYXNrUmVuZGVyZXJcIjtcclxuaW1wb3J0IHB1YlN1YiBmcm9tIFwiLi4vcHViU3ViXCI7XHJcblxyXG5jb25zdCBzdWJtaXRGb3JtID0gKGUsIGxpc3QsIHRhc2spID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGNvbnN0IGZvcm0gPSBlLnRhcmdldDtcclxuICBjb25zdCB0YXNrQ29udGFpbmVyID0gZm9ybS5wYXJlbnROb2RlO1xyXG4gIGNvbnN0IG1haW5EZXRhaWxzID0gdGFza0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLm1haW4tZGV0YWlsc1wiKTtcclxuICBjb25zdCBib3R0b21QYW5lbCA9IHRhc2tDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5ib3R0b20tcGFuZWxcIik7XHJcblxyXG4gIGNvbnN0IGRhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XHJcbiAgY29uc3QgbmV3VmFsdWVzID0ge307XHJcbiAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGRhdGEpIHtcclxuICAgIG5ld1ZhbHVlc1tuYW1lXSA9IHZhbHVlO1xyXG4gIH1cclxuICBjb25zdCB1cGRhdGVkVGFzayA9IGxpc3QudXBkYXRlVGFzayh0YXNrLmlkLCBuZXdWYWx1ZXMpO1xyXG4gIHB1YlN1Yi5wdWJsaXNoKFwidGFza1VwZGF0ZWRcIiwgeyBsaXN0LCB0YXNrOiB1cGRhdGVkVGFzayB9KTtcclxuXHJcbiAgZm9ybS5yZW1vdmUoKTtcclxuICBjb25zdCBtYWluRGV0YWlsc0VsZW1lbnRzID0gY3JlYXRlTWFpbkRldGFpbHNFbGVtZW50cyh1cGRhdGVkVGFzayk7XHJcbiAgbWFpbkRldGFpbHMuYXBwZW5kKG1haW5EZXRhaWxzRWxlbWVudHMpO1xyXG5cclxuICBib3R0b21QYW5lbC5yZXBsYWNlQ2hpbGRyZW4oKTtcclxuICBjb25zdCBib3R0b21QYW5lbEVsZW1lbnRzID0gY3JlYXRlQm90dG9tUGFuZWxFbGVtZW50cyh1cGRhdGVkVGFzayk7XHJcbiAgYm90dG9tUGFuZWwuYXBwZW5kKGJvdHRvbVBhbmVsRWxlbWVudHMpO1xyXG5cclxuICB0YXNrQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJpc0VkaXRhYmxlXCIpO1xyXG59O1xyXG5cclxuY29uc3QgY2FuY2VsRm9ybSA9IChlLCB0YXNrKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCBmb3JtID0gZS50YXJnZXQuY2xvc2VzdChcImZvcm1cIik7XHJcbiAgY29uc3QgdGFza0NvbnRhaW5lciA9IGZvcm0ucGFyZW50Tm9kZTtcclxuICBjb25zdCBtYWluRGV0YWlscyA9IHRhc2tDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5tYWluLWRldGFpbHNcIik7XHJcblxyXG4gIGZvcm0ucmVtb3ZlKCk7XHJcbiAgdGFza0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiaXNFZGl0YWJsZVwiKTtcclxuXHJcbiAgY29uc3QgbWFpbkRldGFpbHNFbGVtZW50cyA9IGNyZWF0ZU1haW5EZXRhaWxzRWxlbWVudHModGFzayk7XHJcbiAgbWFpbkRldGFpbHMuYXBwZW5kKG1haW5EZXRhaWxzRWxlbWVudHMpO1xyXG59O1xyXG5cclxuZXhwb3J0IHsgc3VibWl0Rm9ybSwgY2FuY2VsRm9ybSB9O1xyXG4iLCJpbXBvcnQgeyBjcmVhdGVDdXN0b21FbGVtZW50IH0gZnJvbSBcIi4uL0hlbHBlcnMvY3VzdG9tRWxlbWVudEhlbHBlci5qc1wiO1xyXG5pbXBvcnQgeyBzdWJtaXRGb3JtLCBjYW5jZWxGb3JtIH0gZnJvbSBcIi4vRm9ybUV2ZW50SGFuZGxlcnMuanNcIjtcclxuaW1wb3J0IGF1dG9SZXNpemUgZnJvbSBcIi4uL0V2ZW50SGFuZGxlci5qc1wiO1xyXG5cclxuY29uc3QgRm9ybVJlbmRlcmVyID0gKGN1cnJlbnRMaXN0LCB0YXNrSWQpID0+IHtcclxuICBjb25zdCBhcHBlbmRFZGl0VGFza0Zvcm0gPSAodGFyZ2V0KSA9PiB7XHJcbiAgICBjb25zdCBlZGl0Rm9ybSA9IF9fY3JlYXRlRWRpdFRhc2tGb3JtKCk7XHJcbiAgICB0YXJnZXQuYXBwZW5kKGVkaXRGb3JtKTtcclxuICAgIHJldHVybiBlZGl0Rm9ybTtcclxuICB9O1xyXG5cclxuICBjb25zdCBfX2NyZWF0ZUVkaXRUYXNrRm9ybSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTtcclxuICAgIGNvbnN0IHRhc2sgPSBjdXJyZW50TGlzdC5nZXRUYXNrQnlJZCh0YXNrSWQpO1xyXG4gICAgZm9ybS5pZCA9IFwiZWRpdC10YXNrXCI7XHJcbiAgICBmb3JtLmFwcGVuZChfX2NyZWF0ZUZvcm1FbGVtZW50cyh0YXNrKSk7XHJcblxyXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIHN1Ym1pdEZvcm0oZSwgY3VycmVudExpc3QsIHRhc2spO1xyXG4gICAgfSk7XHJcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgIGNhbmNlbEZvcm0oZSwgY3VycmVudExpc3QuZ2V0VGFza0J5SWQodGFza0lkKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZvcm07XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgX19jcmVhdGVGb3JtRWxlbWVudHMgPSAodGFzaykgPT4ge1xyXG4gICAgLy8gVGl0bGVcclxuICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgIGNvbnN0IHRpdGxlID0gY3JlYXRlQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgIHRhZ05hbWU6IFwidGV4dGFyZWFcIixcclxuICAgICAgY2xhc3NMaXN0OiBcImVkaXQtdGl0bGVcIixcclxuICAgIH0pO1xyXG4gICAgdGl0bGUudmFsdWUgPSB0YXNrLnRpdGxlO1xyXG4gICAgdGl0bGUubmFtZSA9IFwidGl0bGVcIjtcclxuICAgIHRpdGxlLnN0eWxlLndvcmRCcmVhayA9IFwiYnJlYWstd29yZFwiO1xyXG4gICAgdGl0bGUuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGF1dG9SZXNpemUsIGZhbHNlKTtcclxuXHJcbiAgICAvL0Rlc2NyaXB0aW9uXHJcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGNyZWF0ZUN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICB0YWdOYW1lOiBcInRleHRhcmVhXCIsXHJcbiAgICAgIGNsYXNzTGlzdDogXCJlZGl0LWRlc2NyaXB0aW9uXCIsXHJcbiAgICAgIGF0dHJpYnV0ZXM6IFtcInBsYWNlaG9sZGVyXCIsIFwiQWRkIGEgZGVzY3JpcHRpb25cIl0sXHJcbiAgICB9KTtcclxuICAgIGRlc2NyaXB0aW9uLnZhbHVlID0gdGFzay5kZXNjcmlwdGlvbiB8fCBcIlwiO1xyXG4gICAgZGVzY3JpcHRpb24ubmFtZSA9IFwiZGVzY3JpcHRpb25cIjtcclxuXHJcbiAgICAvLyBEdWUgRGF0ZVxyXG4gICAgY29uc3QgZHVlRGF0ZSA9IGNyZWF0ZUN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICB0YWdOYW1lOiBcImlucHV0XCIsXHJcbiAgICAgIGF0dHJpYnV0ZXM6IFtcInR5cGVcIiwgXCJkYXRlXCJdLFxyXG4gICAgICBjbGFzc0xpc3Q6IFwiZWRpdC1kYXRlXCIsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdGFzay5kdWVEYXRlID8gKGR1ZURhdGUudmFsdWUgPSB0YXNrLmR1ZURhdGUpIDogKGR1ZURhdGUudmFsdWUgPSBcIlwiKTtcclxuICAgIGR1ZURhdGUubmFtZSA9IFwiZHVlRGF0ZVwiO1xyXG4gICAgZHVlRGF0ZS5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICBkdWVEYXRlLnZhbHVlQXNEYXRlID0gZHVlRGF0ZS52YWx1ZUFzRGF0ZSA9IG5ldyBEYXRlKFxyXG4gICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICBkYXRlLmdldE1vbnRoKCksXHJcbiAgICAgICAgZGF0ZS5nZXREYXRlKCksXHJcbiAgICAgICAgMTJcclxuICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gRGlmZmljdWx0eVxyXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IGNyZWF0ZUN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICB0YWdOYW1lOiBcInNlbGVjdFwiLFxyXG4gICAgICBjbGFzc0xpc3Q6IFwiZWRpdC1kaWZmaWN1bHR5XCIsXHJcbiAgICB9KTtcclxuICAgIGRpZmZpY3VsdHkubmFtZSA9IFwiZGlmZmljdWx0eVwiO1xyXG4gICAgY29uc3QgZGlmZmljdWx0eU9wdGlvbnMgPSBbXHJcbiAgICAgIHsgbmFtZTogXCJTZWxlY3QgYSBEaWZmaWN1bHR5XCIsIHZhbHVlOiBcIlwiIH0sXHJcbiAgICAgIHsgbmFtZTogXCJFYXN5XCIsIHZhbHVlOiBcIkVhc3lcIiB9LFxyXG4gICAgICB7IG5hbWU6IFwiTWVkaXVtXCIsIHZhbHVlOiBcIk1lZGl1bVwiIH0sXHJcbiAgICAgIHsgbmFtZTogXCJIYXJkXCIsIHZhbHVlOiBcIkhhcmRcIiB9LFxyXG4gICAgXTtcclxuXHJcbiAgICAvLyBEaWZmaWN1bHR5IE9wdGlvbnNcclxuICAgIGNvbnN0IG9wdGlvbkVsZW1lbnRzID0gZGlmZmljdWx0eU9wdGlvbnMubWFwKChvcHRpb24pID0+IHtcclxuICAgICAgY29uc3QgeyBuYW1lLCB2YWx1ZSB9ID0gb3B0aW9uO1xyXG4gICAgICBjb25zdCBvcHRpb25FbGVtZW50ID0gY3JlYXRlQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgdGFnTmFtZTogXCJvcHRpb25cIixcclxuICAgICAgICB0ZXh0Q29udGVudDogbmFtZSxcclxuICAgICAgICBhdHRyaWJ1dGVzOiBbXCJ2YWx1ZVwiLCBgJHt2YWx1ZX1gXSxcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICh0YXNrLmRpZmZpY3VsdHkgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgb3B0aW9uRWxlbWVudC5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG9wdGlvbkVsZW1lbnQ7XHJcbiAgICB9KTtcclxuICAgIGRpZmZpY3VsdHkuYXBwZW5kKC4uLm9wdGlvbkVsZW1lbnRzKTtcclxuXHJcbiAgICAvLyBGb3JtIEJ1dHRvbnNcclxuICAgIGNvbnN0IGZvcm1CdXR0b25zID0gX19jcmVhdGVGb3JtQnV0dG9ucyh0YXNrKTtcclxuICAgIGZyYWdtZW50LmFwcGVuZCh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIGRpZmZpY3VsdHksIGZvcm1CdXR0b25zKTtcclxuXHJcbiAgICByZXR1cm4gZnJhZ21lbnQ7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgX19jcmVhdGVGb3JtQnV0dG9ucyA9ICgpID0+IHtcclxuICAgIGNvbnN0IGRpdiA9IGNyZWF0ZUN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICB0YWdOYW1lOiBcImRpdlwiLFxyXG4gICAgICBjbGFzc0xpc3Q6IFwiZm9ybS1jb250cm9sc1wiLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBzdWJtaXRCdG4gPSBjcmVhdGVDdXN0b21FbGVtZW50KHtcclxuICAgICAgdGFnTmFtZTogXCJidXR0b25cIixcclxuICAgICAgY2xhc3NMaXN0OiBcInN1Ym1pdC1idG5cIixcclxuICAgICAgdGV4dENvbnRlbnQ6IFwiU3VibWl0XCIsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBjcmVhdGVDdXN0b21FbGVtZW50KHtcclxuICAgICAgdGFnTmFtZTogXCJidXR0b25cIixcclxuICAgICAgY2xhc3NMaXN0OiBcImNhbmNlbC1idG5cIixcclxuICAgICAgdGV4dENvbnRlbnQ6IFwiQ2FuY2VsXCIsXHJcbiAgICB9KTtcclxuICAgIGNhbmNlbEJ0bi5vbmNsaWNrID0gKGUpID0+IGNhbmNlbEZvcm0oZSwgY3VycmVudExpc3QuZ2V0VGFza0J5SWQodGFza0lkKSk7XHJcblxyXG4gICAgZGl2LmFwcGVuZChjYW5jZWxCdG4sIHN1Ym1pdEJ0bik7XHJcbiAgICByZXR1cm4gZGl2O1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7IGFwcGVuZEVkaXRUYXNrRm9ybSB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVJlbmRlcmVyO1xyXG4iLCJpbXBvcnQgdGFza2JhckV2ZW50SGFuZGxlciBmcm9tIFwiLi90YXNrYmFyRXZlbnRIYW5kbGVyLmpzXCI7XHJcblxyXG5jb25zdCB0YXNrQ29uZmlnID0gKGN1cnJlbnRMaXN0LCB0YXNrKSA9PiB7XHJcbiAgY29uc3QgZXZlbnRIYW5kbGVyID0gdGFza2JhckV2ZW50SGFuZGxlcihjdXJyZW50TGlzdCwgdGFzayk7XHJcbiAgY29uc3QgdG9vbHMgPSBbXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiRWRpdFwiLFxyXG4gICAgICBpbWdTcmM6IFwiLi4vc3JjL2ltZ3Mvbm91bi1xdWlsbC00NjI2NzE4LnN2Z1wiLFxyXG4gICAgICBjbGFzc05hbWU6IFwiZmlsdGVyLWdyYXlcIixcclxuICAgICAgb25DbGljazogKGUpID0+IGV2ZW50SGFuZGxlci5zZXRFZGl0TW9kZShlKSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiU2V0IFByaW9yaXR5XCIsXHJcbiAgICAgIGltZ1NyYzogXCIuLi9zcmMvaW1ncy9ub3VuLXN0YXItNDQ4NTc0Ni5zdmdcIixcclxuICAgICAgY2xhc3NOYW1lOiBcImZpbHRlci1ncmF5XCIsXHJcbiAgICAgIG9uQ2xpY2s6IChlKSA9PiBldmVudEhhbmRsZXIuc2V0UHJpb3JpdHkoZSksXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkRlbGV0ZVwiLFxyXG4gICAgICBpbWdTcmM6IFwiLi4vc3JjL2ltZ3Mvbm91bi1za3VsbC00NDg1Njc0LnN2Z1wiLFxyXG4gICAgICBjbGFzc05hbWU6IFwiZmlsdGVyLXJlZFwiLFxyXG4gICAgICBvbkNsaWNrOiAoZSkgPT4gZXZlbnRIYW5kbGVyLmRlbGV0ZVRhc2soZSksXHJcbiAgICB9LFxyXG4gIF07XHJcblxyXG4gIHJldHVybiB0b29scztcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHRhc2tDb25maWc7XHJcbiIsImltcG9ydCBGb3JtUmVuZGVyZXIgZnJvbSBcIi4uL0Zvcm0vRm9ybVJlbmRlcmVyLmpzXCI7XHJcbmltcG9ydCBwdWJTdWIgZnJvbSBcIi4uL3B1YlN1Yi5qc1wiO1xyXG5cclxuY29uc3QgdGFza2JhckV2ZW50SGFuZGxlciA9IChjdXJyZW50TGlzdCwgdGFzaykgPT4ge1xyXG4gIGNvbnN0IHNldEVkaXRNb2RlID0gKGUpID0+IHtcclxuICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZS50YXJnZXQuY2xvc2VzdChcIi50YXNrXCIpO1xyXG4gICAgLy8gRXNjYXBlIGlmIGFscmVhZHkgaW4gZWRpdCBtb2RlXHJcbiAgICBpZiAodGFza0VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXNFZGl0YWJsZVwiKSkgcmV0dXJuO1xyXG4gICAgY29uc3QgbWFpbkRldGFpbHMgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tZGV0YWlsc1wiKTtcclxuICAgIHRhc2tFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpc0VkaXRhYmxlXCIpO1xyXG5cclxuICAgIC8vIENsZWFyIGFsbCBjaGlsZHJlbiBpbiBtYWluIGRldGFpbHNcclxuICAgIG1haW5EZXRhaWxzLnJlcGxhY2VDaGlsZHJlbigpO1xyXG5cclxuICAgIGlmICh0YXNrRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJleHBhbmRlZFwiKSkge1xyXG4gICAgICB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmV4cGFuZGVkLWRldGFpbHNcIikucmVtb3ZlKCk7XHJcbiAgICAgIHRhc2tFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJleHBhbmRlZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb3JtUmVuZGVyZXIgPSBGb3JtUmVuZGVyZXIoY3VycmVudExpc3QsIHRhc2suaWQpO1xyXG4gICAgY29uc3QgZWRpdEZvcm0gPSBmb3JtUmVuZGVyZXIuYXBwZW5kRWRpdFRhc2tGb3JtKHRhc2tFbGVtZW50KTtcclxuICAgIGNvbnN0IHRleHRhcmVhcyA9IGVkaXRGb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGV4dGFyZWFcIik7XHJcblxyXG4gICAgWy4uLnRleHRhcmVhc10uZm9yRWFjaCgodGV4dGFyZWEpID0+IHtcclxuICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcclxuICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIiAmJiAhZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgLy8gUHJvZ3JhbWF0aWNhbGx5IHRyaWdnZXIgZm9ybSBzdWJtaXNzaW9uXHJcbiAgICAgICAgICBjb25zdCBzdWJtaXRFdmVudCA9IG5ldyBFdmVudChcInN1Ym1pdFwiLCB7XHJcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXHJcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGVkaXRGb3JtLmRpc3BhdGNoRXZlbnQoc3VibWl0RXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8vIGVkaXRGb3JtXHJcbiAgICAvLyAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRleHRhcmVhXCIpXHJcbiAgICAvLyAgIC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBzdWJtaXRGb3JtKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBzZXRQcmlvcml0eSA9IChlKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50VGFzayA9IGN1cnJlbnRMaXN0LmdldFRhc2tCeUlkKHRhc2suaWQpO1xyXG4gICAgaWYgKGN1cnJlbnRUYXNrLnByaW9yaXR5KSB7XHJcbiAgICAgIGN1cnJlbnRMaXN0LnVwZGF0ZVRhc2sodGFzay5pZCwgeyBwcmlvcml0eTogZmFsc2UgfSk7XHJcbiAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoXCJpbWdcIikuc3JjID0gXCIuLi9zcmMvaW1ncy9ub3VuLXN0YXItNDQ4NTc0Ni5zdmdcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGN1cnJlbnRMaXN0LnVwZGF0ZVRhc2sodGFzay5pZCwgeyBwcmlvcml0eTogdHJ1ZSB9KTtcclxuICAgICAgZS50YXJnZXQuY2xvc2VzdChcImltZ1wiKS5zcmMgPSBcIi4uL3NyYy9pbWdzL25vdW4tc3Rhci00NDg1ODI3LnN2Z1wiO1xyXG4gICAgfVxyXG4gICAgZS50YXJnZXQuY2xvc2VzdChcIi50YXNrXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJpc1ByaW9yaXR5XCIpO1xyXG4gICAgZS50YXJnZXQuY2xvc2VzdChcImltZ1wiKS5jbGFzc0xpc3QudG9nZ2xlKFwiZmlsdGVyLWdyYXlcIik7XHJcbiAgICBlLnRhcmdldC5jbG9zZXN0KFwiaW1nXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJmaWx0ZXIteWVsbG93XCIpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZVRhc2sgPSAoZSkgPT4ge1xyXG4gICAgY3VycmVudExpc3QucmVtb3ZlVGFzayh0YXNrLmlkKTtcclxuICAgIHB1YlN1Yi5wdWJsaXNoKFwidGFza0RlbGV0ZWRcIiwgeyBsaXN0OiBjdXJyZW50TGlzdCwgdGFzayB9KTtcclxuICAgIGUudGFyZ2V0LmNsb3Nlc3QoXCIudGFza1wiKS5yZW1vdmUoKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4geyBzZXRFZGl0TW9kZSwgc2V0UHJpb3JpdHksIGRlbGV0ZVRhc2sgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHRhc2tiYXJFdmVudEhhbmRsZXI7XHJcbiIsImltcG9ydCB7IGVkaXRUYXNrLCB0b2dnbGVEZXRhaWxzIH0gZnJvbSBcIi4uLy4uL0V2ZW50SGFuZGxlci5qc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVDdXN0b21FbGVtZW50IH0gZnJvbSBcIi4uLy4uL0hlbHBlcnMvY3VzdG9tRWxlbWVudEhlbHBlci5qc1wiO1xyXG5pbXBvcnQgZm9ybWF0RGF0ZSBmcm9tIFwiLi4vLi4vSGVscGVycy9mb3JtYXREYXRlSGVscGVyLmpzXCI7XHJcbmltcG9ydCBUb29sYmFyIGZyb20gXCIuLi8uLi9Ub29sYmFyL1Rvb2xiYXIuanNcIjtcclxuaW1wb3J0IHRhc2tDb25maWcgZnJvbSBcIi4uLy4uL1Rvb2xiYXIvdGFza0NvbmZpZy5qc1wiO1xyXG5pbXBvcnQgcHViU3ViIGZyb20gXCIuLi8uLi9wdWJTdWIuanNcIjtcclxuXHJcbnB1YlN1Yi5zdWJzY3JpYmUoXCJ0YXNrQ3JlYXRlZFwiLCByZW5kZXJUYXNrKTtcclxucHViU3ViLnN1YnNjcmliZShcInRhc2tSZWNvbnN0cnVjdGVkXCIsIHJlbmRlclRhc2spO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyVGFzayhkYXRhKSB7XHJcbiAgY29uc29sZS5sb2coXCJSZW5kZXJpbmcgdGFza1wiKTtcclxuICBjb25zdCB7IGxpc3QsIHRhc2sgfSA9IGRhdGE7XHJcbiAgX19hcHBlbmRUYXNrRWxlbWVudHMobGlzdCwgdGFzayk7XHJcbn1cclxuXHJcbmNvbnN0IF9fYXBwZW5kVGFza0VsZW1lbnRzID0gKGxpc3QsIHRhc2spID0+IHtcclxuICBjb25zdCBsaXN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtaWQ9XCIke2xpc3QuZ2V0SWQoKX1cIl1gKTtcclxuICBjb25zdCB0YXNrc0NvbnRhaW5lciA9IGxpc3RDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi50YXNrcy1jb250YWluZXJcIik7XHJcblxyXG4gIGNvbnN0IHRhc2tFbGVtZW50cyA9IF9fY3JlYXRlVGFza0VsZW1lbnRzKGxpc3QsIHRhc2spO1xyXG4gIHRhc2tzQ29udGFpbmVyLnByZXBlbmQodGFza0VsZW1lbnRzKTtcclxufTtcclxuXHJcbmNvbnN0IF9fY3JlYXRlVGFza0VsZW1lbnRzID0gKGN1cnJlbnRMaXN0LCB0YXNrKSA9PiB7XHJcbiAgLy8gRGl2IGNvbnRhaW5lclxyXG4gIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHRhc2tDb250YWluZXIuY2xhc3NOYW1lID0gXCJ0YXNrXCI7XHJcbiAgdGFza0NvbnRhaW5lci5kYXRhc2V0LmlkID0gdGFzay5pZDtcclxuXHJcbiAgLy8gVG9vbGJhclxyXG4gIGNvbnN0IHRvb2xiYXJDcmVhdG9yID0gVG9vbGJhcih0YXNrQ29uZmlnKGN1cnJlbnRMaXN0LCB0YXNrKSk7XHJcbiAgY29uc3QgdG9vbGJhciA9IHRvb2xiYXJDcmVhdG9yLmNyZWF0ZVRvb2xiYXIoY3VycmVudExpc3QsIHRhc2tDb250YWluZXIpO1xyXG4gIC8vIE1haW4gZGV0YWlsc1xyXG4gIGNvbnN0IG1haW5EZXRhaWxzID0gX19yZW5kZXJNYWluRGV0YWlscyh0YXNrKTtcclxuICAvLyBCb3R0b20gUGFuZWxcclxuICBjb25zdCBib3R0b21QYW5lbCA9IF9fcmVuZGVyQm90dG9tUGFuZWwoY3VycmVudExpc3QsIHRhc2suaWQpO1xyXG5cclxuICB0YXNrQ29udGFpbmVyLmFwcGVuZCh0b29sYmFyKTtcclxuICB0YXNrQ29udGFpbmVyLmFwcGVuZChtYWluRGV0YWlscyk7XHJcbiAgdGFza0NvbnRhaW5lci5hcHBlbmQoYm90dG9tUGFuZWwpO1xyXG5cclxuICAvLyBBZGQgb25jbGljayB0byBjaGFuZ2UgZWxlbWVudCB0byBpbnB1dCBvbiBjbGlja1xyXG4gIHRhc2tDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBlZGl0VGFzayhlLCB0YXNrLmlkLCBjdXJyZW50TGlzdCk7XHJcbiAgfSk7XHJcblxyXG4gIHRhc2tDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICB0b2dnbGVEZXRhaWxzKGUsIGN1cnJlbnRMaXN0LCB0YXNrLmlkKTtcclxuICB9KTtcclxuXHJcbiAgdGFza0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIChlKSA9PiB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdG9vbGJhci5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XHJcbiAgICB0b29sYmFyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcclxuICB9KTtcclxuXHJcbiAgdGFza0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT4ge1xyXG4gICAgdG9vbGJhci5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XHJcbiAgICB0b29sYmFyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG4gIH0pO1xyXG5cclxuICAvLyB0b29sYmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKGUpID0+IHtcclxuICAvLyAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgLy8gICB0b29sYmFyLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcclxuICAvLyAgIHRvb2xiYXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xyXG4gIC8vIH0pO1xyXG5cclxuICByZXR1cm4gdGFza0NvbnRhaW5lcjtcclxufTtcclxuXHJcbmNvbnN0IF9fcmVuZGVyTWFpbkRldGFpbHMgPSAodGFzaykgPT4ge1xyXG4gIGNvbnN0IG1haW5EZXRhaWxzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBtYWluRGV0YWlsc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibWFpbi1kZXRhaWxzXCIpO1xyXG4gIG1haW5EZXRhaWxzQ29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZU1haW5EZXRhaWxzRWxlbWVudHModGFzaykpO1xyXG4gIHJldHVybiBtYWluRGV0YWlsc0NvbnRhaW5lcjtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZU1haW5EZXRhaWxzRWxlbWVudHMgPSAodGFzaykgPT4ge1xyXG4gIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICBjb25zdCB0aXRsZSA9IGNyZWF0ZUN1c3RvbUVsZW1lbnQoe1xyXG4gICAgdGFnTmFtZTogXCJwXCIsXHJcbiAgICBjbGFzc0xpc3Q6IFwidGFzay10aXRsZVwiLFxyXG4gICAgdGV4dENvbnRlbnQ6IHRhc2sudGl0bGUsXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gdGFzay5kZXNjcmlwdGlvblxyXG4gICAgPyBjcmVhdGVDdXN0b21FbGVtZW50KHtcclxuICAgICAgICB0YWdOYW1lOiBcInBcIixcclxuICAgICAgICBjbGFzc0xpc3Q6IFwidGFzay1kZXNjcmlwdGlvblwiLFxyXG4gICAgICAgIHRleHRDb250ZW50OiB0YXNrLmRlc2NyaXB0aW9uLFxyXG4gICAgICB9KVxyXG4gICAgOiBcIiBcIjtcclxuXHJcbiAgZnJhZ21lbnQuYXBwZW5kKHRpdGxlLCBkZXNjcmlwdGlvbik7XHJcbiAgcmV0dXJuIGZyYWdtZW50O1xyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyRXhwYW5kZWRUYXNrID0gKHRhcmdldCwgdGFzaykgPT4ge1xyXG4gIGNvbnN0IGV4cGFuZGVkVGFzayA9IF9fY3JlYXRlRXhwYW5kZWRUYXNrKHRhc2spO1xyXG4gIHRhcmdldC5hZnRlcihleHBhbmRlZFRhc2spO1xyXG4gIHJldHVybiBleHBhbmRlZFRhc2s7XHJcbn07XHJcblxyXG5jb25zdCBfX2NyZWF0ZUV4cGFuZGVkVGFzayA9ICh0YXNrKSA9PiB7XHJcbiAgY29uc3QgeyBkdWVEYXRlLCBkaWZmaWN1bHR5IH0gPSB0YXNrO1xyXG4gIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gIC8vIEFwcGVuZCBjaGlsZHJlbiB0byBmcmFnbWVudFxyXG4gIGNvbnN0IGV4cGFuZGVkRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAvLyBTZXQgdG9nZ2xlIGF0dHJpYnV0ZSB0byB3b3JrIHdpdGggdG9nZ2xlIGV2ZW50IGxpc3RlbmVyXHJcbiAgZXhwYW5kZWREaXYuY2xhc3NMaXN0LmFkZChcImV4cGFuZGVkLWRldGFpbHNcIik7XHJcbiAgZnJhZ21lbnQuYXBwZW5kKGV4cGFuZGVkRGl2KTtcclxuXHJcbiAgLy8gZHVlRGF0ZSAmJlxyXG4gIGV4cGFuZGVkRGl2LmFwcGVuZChcclxuICAgIGNyZWF0ZUN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICB0YWdOYW1lOiBcInBcIixcclxuICAgICAgY2xhc3NMaXN0OiBcImR1ZS1kYXRlXCIsXHJcbiAgICAgIHRleHRDb250ZW50OiBmb3JtYXREYXRlKGR1ZURhdGUpLFxyXG4gICAgfSlcclxuICApO1xyXG5cclxuICAvLyBkaWZmaWN1bHR5ICYmXHJcbiAgZXhwYW5kZWREaXYuYXBwZW5kKFxyXG4gICAgY3JlYXRlQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgIHRhZ05hbWU6IFwicFwiLFxyXG4gICAgICBjbGFzc0xpc3Q6IFwiZGlmZmljdWx0eVwiLFxyXG4gICAgICB0ZXh0Q29udGVudDogZGlmZmljdWx0eSxcclxuICAgIH0pXHJcbiAgKTtcclxuICByZXR1cm4gZnJhZ21lbnQ7XHJcbn07XHJcblxyXG5jb25zdCBfX3JlbmRlckJvdHRvbVBhbmVsID0gKGN1cnJlbnRMaXN0LCB0YXNrSWQpID0+IHtcclxuICBjb25zdCB0YXNrID0gY3VycmVudExpc3QuZ2V0VGFza0J5SWQodGFza0lkKTtcclxuICBjb25zdCBib3R0b21QYW5lbCA9IGNyZWF0ZUN1c3RvbUVsZW1lbnQoe1xyXG4gICAgdGFnTmFtZTogXCJkaXZcIixcclxuICAgIGNsYXNzTGlzdDogXCJib3R0b20tcGFuZWxcIixcclxuICB9KTtcclxuICBib3R0b21QYW5lbC5hcHBlbmQoY3JlYXRlQm90dG9tUGFuZWxFbGVtZW50cyh0YXNrKSk7XHJcbiAgcmV0dXJuIGJvdHRvbVBhbmVsO1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlQm90dG9tUGFuZWxFbGVtZW50cyA9ICh0YXNrKSA9PiB7XHJcbiAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gIGNvbnN0IGdldFRhc2tEaWZmaWN1bHR5ID0gKGRpZmZpY3VsdHkpID0+IHtcclxuICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xyXG4gICAgICBjYXNlIFwiRWFzeVwiOlxyXG4gICAgICAgIHJldHVybiBcIuKalO+4j1wiO1xyXG4gICAgICBjYXNlIFwiTWVkaXVtXCI6XHJcbiAgICAgICAgcmV0dXJuIFwi4pqU77iP4pqU77iPXCI7XHJcbiAgICAgIGNhc2UgXCJIYXJkXCI6XHJcbiAgICAgICAgcmV0dXJuIFwi4pqU77iP4pqU77iP4pqU77iPXCI7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGlmZmljdWx0eUVsID0gY3JlYXRlQ3VzdG9tRWxlbWVudCh7XHJcbiAgICB0YWdOYW1lOiBcInBcIixcclxuICAgIHRleHRDb250ZW50OiBnZXRUYXNrRGlmZmljdWx0eSh0YXNrLmRpZmZpY3VsdHkpLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBkdWVEYXRlRWwgPSBjcmVhdGVDdXN0b21FbGVtZW50KHtcclxuICAgIHRhZ05hbWU6IFwicFwiLFxyXG4gICAgdGV4dENvbnRlbnQ6IGZvcm1hdERhdGUodGFzay5kdWVEYXRlKSB8fCBcIlwiLFxyXG4gIH0pO1xyXG5cclxuICBmcmFnbWVudC5hcHBlbmQoZHVlRGF0ZUVsLCBkaWZmaWN1bHR5RWwpO1xyXG4gIHJldHVybiBmcmFnbWVudDtcclxufTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgcmVuZGVyRXhwYW5kZWRUYXNrLFxyXG4gIGNyZWF0ZU1haW5EZXRhaWxzRWxlbWVudHMsXHJcbiAgY3JlYXRlQm90dG9tUGFuZWxFbGVtZW50cyxcclxufTtcclxuIiwiaW1wb3J0IHsgcmVuZGVyRXhwYW5kZWRUYXNrIH0gZnJvbSBcIi4vTGlzdC90YXNrL1Rhc2tSZW5kZXJlci5qc1wiO1xyXG5pbXBvcnQgcHVic3ViIGZyb20gXCIuL3B1YlN1Yi5qc1wiO1xyXG5cclxuY29uc3QgY3JlYXRlTGlzdCA9IChlLCBjdXJyZW50UHJvamVjdCkgPT4ge1xyXG4gIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCB0aXRsZSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgY29uc3QgbmV3TGlzdCA9IGN1cnJlbnRQcm9qZWN0LmNyZWF0ZUxpc3QodGl0bGUpO1xyXG4gICAgZS50YXJnZXQudmFsdWUgPSBcIlwiO1xyXG5cclxuICAgIHB1YnN1Yi5wdWJsaXNoKFwibGlzdENyZWF0ZWRcIiwgbmV3TGlzdCk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlVGFzayA9IChlLCBsaXN0KSA9PiB7XHJcbiAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IHRpdGxlID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICBjb25zdCBuZXdUYXNrID0gbGlzdC5jcmVhdGVUYXNrKHRpdGxlKTtcclxuXHJcbiAgICBlLnRhcmdldC52YWx1ZSA9IFwiXCI7XHJcblxyXG4gICAgcHVic3ViLnB1Ymxpc2goXCJ0YXNrQ3JlYXRlZFwiLCB7IGxpc3QsIHRhc2s6IG5ld1Rhc2sgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gYXV0b1Jlc2l6ZSgpIHtcclxuICB0aGlzLnN0eWxlLmhlaWdodCA9IFwiYXV0b1wiO1xyXG4gIHRoaXMuc3R5bGUuaGVpZ2h0ID0gdGhpcy5zY3JvbGxIZWlnaHQgKyBcInB4XCI7XHJcbn1cclxuXHJcbi8vIFJlZmFjdG9yIHRoaXMgbWVzcyBsYXRlclxyXG5jb25zdCBlZGl0VGFzayA9IChlLCB0YXNrSWQsIGN1cnJlbnRMaXN0KSA9PiB7XHJcbiAgY29uc3QgZWwgPSBlLnRhcmdldDtcclxuICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucyhcInRhc2stdGl0bGVcIikpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgcHJldmlvdXMgPSBlbC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XHJcbiAgY29uc3QgY3VycmVudFRhc2sgPSBjdXJyZW50TGlzdC5nZXRUYXNrQnlJZCh0YXNrSWQpO1xyXG5cclxuICBpbnB1dC5jbGFzc0xpc3QuYWRkKFwidGVtcC1pbnB1dFwiKTtcclxuICBpbnB1dC52YWx1ZSA9IGN1cnJlbnRUYXNrLnRpdGxlO1xyXG4gIC8vIGlucHV0LnN0eWxlLndyYXAgPSBcInNvZnRcIjtcclxuICBpbnB1dC5zdHlsZS53b3JkQnJlYWsgPSBcImJyZWFrLXdvcmRcIjtcclxuXHJcbiAgZWwucmVwbGFjZVdpdGgoaW5wdXQpO1xyXG4gIGlucHV0LnN0eWxlLmhlaWdodCA9IFwiYXV0b1wiO1xyXG4gIGlucHV0LnN0eWxlLmhlaWdodCA9IGlucHV0LnNjcm9sbEhlaWdodCArIFwicHhcIjtcclxuXHJcbiAgY29uc3Qgc2F2ZSA9ICgpID0+IHtcclxuICAgIC8vIFNhdmUgdGhlIGlucHV0IHZhbHVlIGludG8gdGhlIHNlbGVjdGVkIHRhc2tcclxuICAgIGN1cnJlbnRMaXN0LnVwZGF0ZVRhc2sodGFza0lkLCB7IHRpdGxlOiBpbnB1dC52YWx1ZSB9KTtcclxuICAgIHByZXZpb3VzLnRleHRDb250ZW50ID0gaW5wdXQudmFsdWU7XHJcbiAgICBpbnB1dC5yZXBsYWNlV2l0aChwcmV2aW91cyk7XHJcbiAgfTtcclxuXHJcbiAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICAgIGlucHV0LmJsdXIoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgc2F2ZSwge1xyXG4gICAgb25jZTogdHJ1ZSxcclxuICB9KTtcclxuXHJcbiAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGF1dG9SZXNpemUsIGZhbHNlKTtcclxuICBpbnB1dC5mb2N1cygpO1xyXG59O1xyXG5cclxuY29uc3QgdG9nZ2xlRGV0YWlscyA9IChlLCBjdXJyZW50TGlzdCwgdGFza0lkKSA9PiB7XHJcbiAgLy8gRG8gbm90IHRvZ2dsZSBpZiB0YXNrIGlzIGluIEVkaXQgTW9kZSBvciBpZiB0aGUgdGFyZ2V0IGlzIG5vdCB0aGUgdGFza1xyXG4gIGlmIChcclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImlzRWRpdGFibGVcIikgfHxcclxuICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YXNrXCIpXHJcbiAgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCB0YXNrQ29udGFpbmVyID0gZS50YXJnZXQ7XHJcbiAgY29uc3QgbWFpbkRldGFpbHMgPSB0YXNrQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1kZXRhaWxzXCIpO1xyXG5cclxuICBjb25zdCBleHBhbmRlZERldGFpbHMgPSB0YXNrQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuZXhwYW5kZWQtZGV0YWlsc1wiKTtcclxuXHJcbiAgaWYgKCFleHBhbmRlZERldGFpbHMpIHtcclxuICAgIGNvbnN0IHRhc2sgPSBjdXJyZW50TGlzdC5nZXRUYXNrQnlJZCh0YXNrSWQpO1xyXG4gICAgcmVuZGVyRXhwYW5kZWRUYXNrKG1haW5EZXRhaWxzLCB0YXNrKTtcclxuICAgIHRhc2tDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImV4cGFuZGVkXCIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBleHBhbmRlZERldGFpbHMucmVtb3ZlKCk7XHJcbiAgICB0YXNrQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJleHBhbmRlZFwiKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgeyBjcmVhdGVMaXN0LCBjcmVhdGVUYXNrLCBlZGl0VGFzaywgdG9nZ2xlRGV0YWlscywgYXV0b1Jlc2l6ZSB9O1xyXG4iLCJpbXBvcnQgcmVuZGVyTGlzdCBmcm9tIFwiLi9MaXN0UmVuZGVyZXIuanNcIjtcclxuaW1wb3J0IHB1YlN1YiBmcm9tIFwiLi4vcHViU3ViLmpzXCI7XHJcbmltcG9ydCB7IGF1dG9SZXNpemUgfSBmcm9tIFwiLi4vRXZlbnRIYW5kbGVyLmpzXCI7XHJcblxyXG4vKlxyXG4gIEZsb3c6XHJcbiAgUmV0cmlldmUgbG9jYWxTdG9yYWdlXHJcbiAgSWYgbm8gc3RvcmFnZSBpcyBhdmFpbGFibGUsIHRoZW4gY3JlYXRlIHRoZSBkZWZhdWx0IGxpc3QuXHJcbiAgRWxzZSwgcmVuZGVyIHRoZSBzdG9yZWQgTGlzdC5cclxuICAgIFRoZW4sIHJlbmRlciB0aGUgc3RvcmVkIHRhc2tzIGlmIHRoZXJlIGFyZSB0YXNrc1xyXG5cclxuKi9cclxuXHJcbmNvbnN0IGNyZWF0ZURlZmF1bHRMaXN0ID0gKGRlZmF1bHRQcm9qZWN0KSA9PiB7XHJcbiAgY29uc3QgaGFiaXRMaXN0ID0gZGVmYXVsdFByb2plY3QuY3JlYXRlTGlzdChcIkhhYml0c1wiKTtcclxuICBjb25zdCBmaXJzdFRhc2sgPSBoYWJpdExpc3QuY3JlYXRlVGFzayhcIkNyZWF0ZSB5b3VyIGZpcnN0IGhhYml0IVwiKTtcclxuICBwdWJTdWIucHVibGlzaChcImxpc3RDcmVhdGVkXCIsIGhhYml0TGlzdCk7XHJcbiAgcHViU3ViLnB1Ymxpc2goXCJ0YXNrQ3JlYXRlZFwiLCB7IGxpc3Q6IGhhYml0TGlzdCwgdGFzazogZmlyc3RUYXNrIH0pO1xyXG59O1xyXG5cclxuY29uc3QgZWRpdFRpdGxlID0gKGUsIGxpc3QpID0+IHtcclxuICBjb25zdCBlbCA9IGUudGFyZ2V0O1xyXG5cclxuICBjb25zdCBwcmV2aW91cyA9IGVsLmNsb25lTm9kZSh0cnVlKTtcclxuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcclxuXHJcbiAgaW5wdXQuY2xhc3NMaXN0LmFkZChcInRlbXAtaW5wdXRcIik7XHJcbiAgaW5wdXQudmFsdWUgPSBsaXN0LmdldFRpdGxlKCk7XHJcbiAgLy8gaW5wdXQuc3R5bGUud3JhcCA9IFwic29mdFwiO1xyXG4gIGlucHV0LnN0eWxlLndvcmRCcmVhayA9IFwiYnJlYWstd29yZFwiO1xyXG5cclxuICBlbC5yZXBsYWNlV2l0aChpbnB1dCk7XHJcbiAgaW5wdXQuc3R5bGUuaGVpZ2h0ID0gXCJhdXRvXCI7XHJcbiAgaW5wdXQuc3R5bGUuaGVpZ2h0ID0gaW5wdXQuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG5cclxuICBjb25zdCBzYXZlID0gKCkgPT4ge1xyXG4gICAgLy8gU2F2ZSB0aGUgaW5wdXQgdmFsdWUgaW50byB0aGUgc2VsZWN0ZWQgTGlzdCBvYmplY3RcclxuICAgIGNvbnN0IHRpdGxlID0gbGlzdC5zZXRUaXRsZShpbnB1dC52YWx1ZSk7XHJcbiAgICBwdWJTdWIucHVibGlzaChcImxpc3RVcGRhdGVkXCIsIHsgbGlzdCwgdGl0bGUgfSk7XHJcbiAgICBwcmV2aW91cy50ZXh0Q29udGVudCA9IGlucHV0LnZhbHVlO1xyXG4gICAgaW5wdXQucmVwbGFjZVdpdGgocHJldmlvdXMpO1xyXG4gICAgLy8gUmVjdXJzaXZlbHkgcmVjYWxsIHRoZSBldmVudCBoYW5kbGVyXHJcbiAgICBwcmV2aW91cy5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgZWRpdFRpdGxlKGUsIGxpc3QpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgbGV0IGVzY2FwZVByZXNzZWQgPSBmYWxzZTtcclxuXHJcbiAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGF1dG9SZXNpemUsIGZhbHNlKTtcclxuICBpbnB1dC5mb2N1cygpO1xyXG5cclxuICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBzYXZlLCB7XHJcbiAgICBvbmNlOiB0cnVlLFxyXG4gIH0pO1xyXG5cclxuICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcclxuICAgICAgaW5wdXQuYmx1cigpO1xyXG4gICAgfVxyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIGlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIHNhdmUpO1xyXG4gICAgICBpbnB1dC5yZXBsYWNlV2l0aChwcmV2aW91cyk7XHJcblxyXG4gICAgICBwcmV2aW91cy5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICBlZGl0VGl0bGUoZSwgbGlzdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuLy8gTWF5IGJlIHVzZWxlc3Mgbm93XHJcblxyXG4vLyBjb25zdCBjaGVja0Zvckxpc3RzID0gKGN1cnJlbnRQcm9qZWN0KSA9PiB7XHJcbi8vICAgY29uc29sZS5sb2coY3VycmVudFByb2plY3QpO1xyXG4vLyAgIGNvbnN0IGxpc3RzID0gY3VycmVudFByb2plY3QuZ2V0TGlzdHMoKTtcclxuLy8gICBpZiAobGlzdHMubGVuZ3RoKSB7XHJcbi8vICAgICAvLyBUaGlzIGlzIHJlbmRlcmluZyBldmVyeSB0YXNrIHdpdGhpbiB0aGUgbGlzdCByaWdodCBub3cgZXZlbiBpZiB0aGVyZSBhcmUgbm9uZS5cclxuLy8gICAgIGxpc3RzLmZvckVhY2goKGxpc3QpID0+IHJlbmRlckxpc3QobGlzdCkpO1xyXG4vLyAgIH0gZWxzZSB7XHJcbi8vICAgICBjcmVhdGVEZWZhdWx0TGlzdChjdXJyZW50UHJvamVjdCk7XHJcbi8vICAgfVxyXG4vLyB9O1xyXG5cclxuZXhwb3J0IHsgY3JlYXRlRGVmYXVsdExpc3QsIGVkaXRUaXRsZSB9O1xyXG4iLCJpbXBvcnQgcHViU3ViIGZyb20gXCIuL3B1YlN1YlwiO1xyXG5cclxuY29uc3Qgc3RvcmUgPSAoKCkgPT4ge1xyXG4gIGNvbnN0IHByb2plY3RzID0gW107XHJcbiAgbGV0IGN1cnJlbnRQcm9qZWN0ID0gbnVsbDtcclxuICAvLyBQb3B1bGF0ZSBwcm9qZWN0cyB3aXRoIGEgbGlzdCBvZiBhbGwgdGhlIHByb2plY3QgbmFtZXMgd2l0aGluIHN0b3JhZ2UgKyBhZGQgYW55IG5ld2x5IGNyZWF0ZWQgcHJvamVjdHNcclxuXHJcbiAgY29uc3QgZ2V0Q3VycmVudFByb2plY3QgPSAoKSA9PiBjdXJyZW50UHJvamVjdDtcclxuXHJcbiAgZnVuY3Rpb24gYWRkUHJvamVjdChwcm9qZWN0KSB7XHJcbiAgICBpZiAoY3VycmVudFByb2plY3QgPT09IG51bGwpIHtcclxuICAgICAgc2V0Q3VycmVudFByb2plY3QocHJvamVjdCk7XHJcbiAgICB9XHJcbiAgICBwcm9qZWN0cy5wdXNoKHByb2plY3QpO1xyXG4gICAgcmV0dXJuIHByb2plY3RzO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2V0Q3VycmVudFByb2plY3QgPSAocHJvamVjdCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJTZXR0aW5nIGN1cnJlbnQgcHJvamVjdDogXCIgKyBwcm9qZWN0LmdldFRpdGxlKCkpO1xyXG4gICAgY3VycmVudFByb2plY3QgPSBwcm9qZWN0O1xyXG4gICAgcHViU3ViLnB1Ymxpc2goXCJjdXJyZW50UHJvamVjdFNldFwiLCB7XHJcbiAgICAgIHRpdGxlOiBwcm9qZWN0LmdldFRpdGxlKCksXHJcbiAgICAgIGlkOiBwcm9qZWN0LmdldElkKCksXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBjdXJyZW50UHJvamVjdDtcclxuICB9O1xyXG4gIHJldHVybiB7IGdldEN1cnJlbnRQcm9qZWN0LCBzZXRDdXJyZW50UHJvamVjdCB9O1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgc3RvcmU7XHJcbiIsImltcG9ydCBsaXN0YmFyRXZlbnRIYW5kbGVyIGZyb20gXCIuL2xpc3RiYXJFdmVudEhhbmRsZXJcIjtcclxuXHJcbmNvbnN0IGxpc3RDb25maWcgPSAobGlzdCkgPT4ge1xyXG4gIGNvbnN0IGV2ZW50SGFuZGxlciA9IGxpc3RiYXJFdmVudEhhbmRsZXIobGlzdCk7XHJcbiAgY29uc3QgdG9vbHMgPSBbXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiRGVsZXRlXCIsXHJcbiAgICAgIGltZ1NyYzogXCIuLi9zcmMvaW1ncy9ub3VuLXNrdWxsLTQ0ODU2NzQuc3ZnXCIsXHJcbiAgICAgIGNsYXNzTmFtZTogXCJmaWx0ZXItcmVkXCIsXHJcbiAgICAgIG9uQ2xpY2s6IChlKSA9PiBldmVudEhhbmRsZXIuZGVsZXRlTGlzdChlKSxcclxuICAgIH0sXHJcbiAgXTtcclxuXHJcbiAgcmV0dXJuIHRvb2xzO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbGlzdENvbmZpZztcclxuIiwiaW1wb3J0IHB1YlN1YiBmcm9tIFwiLi4vcHViU3ViLmpzXCI7XHJcbmltcG9ydCBzdG9yZSBmcm9tIFwiLi4vc3RvcmUuanNcIjtcclxuXHJcbmNvbnN0IGxpc3RiYXJFdmVudEhhbmRsZXIgPSAobGlzdCkgPT4ge1xyXG4gIGNvbnN0IGRlbGV0ZUxpc3QgPSAoZSkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFByb2plY3QgPSBzdG9yZS5nZXRDdXJyZW50UHJvamVjdCgpO1xyXG4gICAgY29uc3QgcmVtb3ZlZExpc3QgPSBjdXJyZW50UHJvamVjdC5yZW1vdmVMaXN0KGxpc3QuZ2V0SWQoKSk7XHJcbiAgICBwdWJTdWIucHVibGlzaChcImxpc3REZWxldGVkXCIsIHJlbW92ZWRMaXN0KTtcclxuICAgIGUudGFyZ2V0LmNsb3Nlc3QoXCIubGlzdFwiKS5yZW1vdmUoKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4geyBkZWxldGVMaXN0IH07XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBsaXN0YmFyRXZlbnRIYW5kbGVyO1xyXG4iLCJpbXBvcnQge1xyXG4gIGFwcGVuZEN1c3RvbUVsZW1lbnQsXHJcbiAgY3JlYXRlQ3VzdG9tRWxlbWVudCxcclxufSBmcm9tIFwiLi4vSGVscGVycy9jdXN0b21FbGVtZW50SGVscGVyLmpzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVRhc2sgfSBmcm9tIFwiLi4vRXZlbnRIYW5kbGVyLmpzXCI7XHJcbmltcG9ydCB7IGVkaXRUaXRsZSB9IGZyb20gXCIuLi9MaXN0L0xpc3RIYW5kbGVyLmpzXCI7XHJcbmltcG9ydCBwdWJTdWIgZnJvbSBcIi4uL3B1YlN1Yi5qc1wiO1xyXG5pbXBvcnQgVG9vbGJhciBmcm9tIFwiLi4vVG9vbGJhci9Ub29sYmFyLmpzXCI7XHJcbmltcG9ydCBsaXN0Q29uZmlnIGZyb20gXCIuLi9Ub29sYmFyL2xpc3RDb25maWcuanNcIjtcclxuXHJcbnB1YlN1Yi5zdWJzY3JpYmUoXCJsaXN0Q3JlYXRlZFwiLCByZW5kZXJMaXN0KTtcclxucHViU3ViLnN1YnNjcmliZShcImxpc3RSZWNvbnN0cnVjdGVkXCIsIHJlbmRlckxpc3QpO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyTGlzdChsaXN0KSB7XHJcbiAgY29uc29sZS5sb2coXCJSZW5kZXJpbmcgTGlzdFwiKTtcclxuICAvLyBMaXN0IEVsZW1lbnRzXHJcbiAgX19hcHBlbmRMaXN0Q29udGFpbmVyKGxpc3QpO1xyXG4gIC8vIFRvb2xiYXJcclxuICBfX2FwcGVuZFRvb2xiYXIobGlzdCk7XHJcblxyXG4gIF9fYXBwZW5kVGl0bGVFbGVtZW50KGxpc3QpO1xyXG5cclxuICAvLyBUYXNrIEVsZW1lbnRcclxuICBfX2FwcGVuZFRhc2tDb250YWluZXIobGlzdCk7XHJcbn1cclxuXHJcbmNvbnN0IF9fYXBwZW5kTGlzdENvbnRhaW5lciA9IChsaXN0KSA9PiB7XHJcbiAgYXBwZW5kQ3VzdG9tRWxlbWVudCh7XHJcbiAgICB0YXJnZXQ6IFwiLmxpc3RzLWNvbnRhaW5lclwiLFxyXG4gICAgdGFnTmFtZTogXCJkaXZcIixcclxuICAgIGNsYXNzTGlzdDogW1wibGlzdFwiXSxcclxuICAgIGF0dHJpYnV0ZXM6IFtcImRhdGEtaWRcIiwgbGlzdC5nZXRJZCgpXSxcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IF9fYXBwZW5kVGl0bGVFbGVtZW50ID0gKGxpc3QpID0+IHtcclxuICBjb25zdCBsaXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWlkPVwiJHtsaXN0LmdldElkKCl9XCJdYCk7XHJcbiAgY29uc3QgdGl0bGUgPSBjcmVhdGVDdXN0b21FbGVtZW50KHtcclxuICAgIHRhZ05hbWU6IFwiaDJcIixcclxuICAgIGNsYXNzTGlzdDogXCJsaXN0LXRpdGxlXCIsXHJcbiAgICB0ZXh0Q29udGVudDogbGlzdC5nZXRUaXRsZSgpLFxyXG4gIH0pO1xyXG4gIHRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgZWRpdFRpdGxlKGUsIGxpc3QpO1xyXG4gIH0pO1xyXG4gIGxpc3RFbGVtZW50LmFwcGVuZCh0aXRsZSwgX19jcmVhdGVUYXNrRm9ybShsaXN0KSk7XHJcbn07XHJcblxyXG5jb25zdCBfX2NyZWF0ZVRhc2tGb3JtID0gKGxpc3QpID0+IHtcclxuICAvLyBDcmVhdGUgZm9ybSBhbmQgYXBwZW5kIGlucHV0IHRvIExpc3RcclxuICBjb25zdCB0YXNrRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xyXG4gIHRhc2tGb3JtLmNsYXNzTmFtZSA9IFwidGFzay1mb3JtXCI7XHJcbiAgY29uc3QgdGFza0lucHV0ID0gY3JlYXRlQ3VzdG9tRWxlbWVudCh7XHJcbiAgICB0YWdOYW1lOiBcImlucHV0XCIsXHJcbiAgICBjbGFzc0xpc3Q6IFwidGFzay1pbnB1dFwiLFxyXG4gICAgYXR0cmlidXRlczogW1wicGxhY2Vob2xkZXJcIiwgXCJBZGQgYSB0YXNrXCJdLFxyXG4gIH0pO1xyXG4gIHRhc2tGb3JtLmFwcGVuZENoaWxkKHRhc2tJbnB1dCk7XHJcblxyXG4gIC8vIEJpbmQgaW5wdXQgbGlzdGVuZXIgdG8gbW9uaXRvciBuZXcgdGFzayBlbnRyaWVzXHJcbiAgdGFza0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcbiAgICBjcmVhdGVUYXNrKGUsIGxpc3QpO1xyXG4gIH0pO1xyXG4gIHJldHVybiB0YXNrRm9ybTtcclxufTtcclxuXHJcbmNvbnN0IF9fYXBwZW5kVGFza0NvbnRhaW5lciA9IChsaXN0KSA9PiB7XHJcbiAgYXBwZW5kQ3VzdG9tRWxlbWVudCh7XHJcbiAgICB0YXJnZXQ6IGBbZGF0YS1pZD1cIiR7bGlzdC5nZXRJZCgpfVwiXWAsXHJcbiAgICB0YWdOYW1lOiBcImRpdlwiLFxyXG4gICAgY2xhc3NMaXN0OiBcInRhc2tzLWNvbnRhaW5lclwiLFxyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgX19hcHBlbmRUb29sYmFyID0gKGxpc3QpID0+IHtcclxuICBjb25zdCBsaXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWlkPVwiJHtsaXN0LmdldElkKCl9XCJdYCk7XHJcbiAgY29uc3QgdG9vbGJhckNyZWF0b3IgPSBUb29sYmFyKGxpc3RDb25maWcobGlzdCkpO1xyXG4gIGNvbnN0IHRvb2xiYXIgPSB0b29sYmFyQ3JlYXRvci5jcmVhdGVUb29sYmFyKCk7XHJcblxyXG4gIGxpc3RFbGVtZW50LmFwcGVuZCh0b29sYmFyKTtcclxuXHJcbiAgbGlzdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCAoKSA9PiB7XHJcbiAgICB0b29sYmFyLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcclxuICAgIHRvb2xiYXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xyXG4gIH0pO1xyXG5cclxuICBsaXN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT4ge1xyXG4gICAgdG9vbGJhci5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XHJcbiAgICB0b29sYmFyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcmVuZGVyTGlzdDtcclxuIiwiaW1wb3J0IFRhc2tNYW5hZ2VyIGZyb20gXCIuL3Rhc2svVGFza01hbmFnZXJcIjtcclxuXHJcbmNvbnN0IExpc3QgPSAodGl0bGUsIGlkID0gY3J5cHRvLnJhbmRvbVVVSUQoKS5zbGljZSgwLCA4KSkgPT4ge1xyXG4gIGxldCBsaXN0VGl0bGUgPSB0aXRsZTtcclxuICBjb25zdCB0YXNrcyA9IFtdO1xyXG4gIGNvbnN0IHRhc2tNYW5hZ2VyID0gVGFza01hbmFnZXIodGFza3MpO1xyXG5cclxuICBjb25zdCBnZXRUaXRsZSA9ICgpID0+IGxpc3RUaXRsZTtcclxuICBjb25zdCBzZXRUaXRsZSA9IChuZXdUaXRsZSkgPT4gKGxpc3RUaXRsZSA9IG5ld1RpdGxlKTtcclxuICBjb25zdCBnZXRJZCA9ICgpID0+IGlkO1xyXG4gIGNvbnN0IGdldFRhc2tzID0gKCkgPT4gdGFza3M7XHJcblxyXG4gIGNvbnN0IGNyZWF0ZVRhc2sgPSAodGl0bGUsIHRhc2tJZCkgPT4ge1xyXG4gICAgcmV0dXJuIHRhc2tNYW5hZ2VyLmNyZWF0ZVRhc2sodGl0bGUsIHRhc2tJZCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0VGFza0J5SWQgPSAodGFza0lkKSA9PiB7XHJcbiAgICByZXR1cm4gdGFza01hbmFnZXIuZ2V0VGFza0J5SWQodGFza0lkKTtcclxuICB9O1xyXG5cclxuICBjb25zdCB1cGRhdGVUYXNrID0gKHRhc2tJZCwgdXBkYXRlZEVudHJ5KSA9PiB7XHJcbiAgICByZXR1cm4gdGFza01hbmFnZXIudXBkYXRlVGFzayh0YXNrSWQsIHVwZGF0ZWRFbnRyeSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVtb3ZlVGFzayA9ICh0YXNrSWQpID0+IHtcclxuICAgIHJldHVybiB0YXNrTWFuYWdlci5yZW1vdmVUYXNrKHRhc2tJZCk7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGdldFRpdGxlLFxyXG4gICAgc2V0VGl0bGUsXHJcbiAgICBnZXRJZCxcclxuICAgIGdldFRhc2tzLFxyXG4gICAgY3JlYXRlVGFzayxcclxuICAgIGdldFRhc2tCeUlkLFxyXG4gICAgdXBkYXRlVGFzayxcclxuICAgIHJlbW92ZVRhc2ssXHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IExpc3Q7XHJcbiIsImNvbnN0IFRhc2tNYW5hZ2VyID0gKHRhc2tMaXN0KSA9PiB7XHJcbiAgY29uc3QgZ2V0VGFza0J5SWQgPSAodGFza0lkKSA9PiB7XHJcbiAgICByZXR1cm4gdGFza0xpc3QuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PT0gdGFza0lkKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXRUYXNrQnlJbmRleCA9ICh0YXNrSWQpID0+IHtcclxuICAgIHJldHVybiB0YXNrTGlzdC5maW5kSW5kZXgoKHRhc2spID0+IHRhc2suaWQgPT09IHRhc2tJZCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY3JlYXRlVGFzayA9ICh0aXRsZSwgdGFza0lkID0gY3J5cHRvLnJhbmRvbVVVSUQoKS5zbGljZSgwLCA4KSkgPT4ge1xyXG4gICAgdGFza0xpc3QucHVzaCh7XHJcbiAgICAgIGlkOiB0YXNrSWQsXHJcbiAgICAgIHRpdGxlLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGFza0xpc3RbdGFza0xpc3QubGVuZ3RoIC0gMV07XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdXBkYXRlVGFzayA9ICh0YXNrSWQsIHVwZGF0ZWRFbnRyeSkgPT4ge1xyXG4gICAgY29uc3QgdGFza0luZGV4ID0gZ2V0VGFza0J5SW5kZXgodGFza0lkKTtcclxuICAgIHRhc2tMaXN0W3Rhc2tJbmRleF0gPSB7IC4uLnRhc2tMaXN0W3Rhc2tJbmRleF0sIC4uLnVwZGF0ZWRFbnRyeSB9O1xyXG4gICAgcmV0dXJuIHRhc2tMaXN0W3Rhc2tJbmRleF07XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVtb3ZlVGFzayA9ICh0YXNrSWQpID0+IHtcclxuICAgIGNvbnN0IHRhc2tJbmRleCA9IGdldFRhc2tCeUluZGV4KHRhc2tJZCk7XHJcbiAgICB0YXNrTGlzdC5zcGxpY2UodGFza0luZGV4LCAxKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4geyBnZXRUYXNrQnlJZCwgY3JlYXRlVGFzaywgdXBkYXRlVGFzaywgcmVtb3ZlVGFzayB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGFza01hbmFnZXI7XHJcbiIsImltcG9ydCBMaXN0IGZyb20gXCIuL0xpc3QvTGlzdFwiO1xyXG5cclxuY29uc3QgUHJvamVjdCA9ICh0aXRsZSwgaWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpLnNsaWNlKDAsIDgpKSA9PiB7XHJcbiAgY29uc3QgbGlzdHMgPSBbXTtcclxuXHJcbiAgY29uc3QgZ2V0VGl0bGUgPSAoKSA9PiB0aXRsZTtcclxuICBjb25zdCBnZXRJZCA9ICgpID0+IGlkO1xyXG4gIGNvbnN0IGdldExpc3RzID0gKCkgPT4gbGlzdHM7XHJcblxyXG4gIGNvbnN0IGNyZWF0ZUxpc3QgPSAodGl0bGUsIGlkKSA9PiB7XHJcbiAgICBsaXN0cy5wdXNoKExpc3QodGl0bGUsIGlkKSk7XHJcbiAgICByZXR1cm4gbGlzdHNbbGlzdHMubGVuZ3RoIC0gMV07XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVtb3ZlTGlzdCA9IChsaXN0SWQpID0+IHtcclxuICAgIGNvbnN0IGluZGV4ID0gX19nZXRMaXN0SW5kZXgobGlzdElkKTtcclxuICAgIGNvbnN0IGVudHJ5ID0gbGlzdHNbaW5kZXhdO1xyXG4gICAgbGlzdHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHJldHVybiBlbnRyeTtcclxuICB9O1xyXG5cclxuICBjb25zdCBfX2dldExpc3RJbmRleCA9IChsaXN0SWQpID0+IHtcclxuICAgIGNvbnN0IGxpc3RJbmRleCA9IGxpc3RzLmZpbmRJbmRleCgobGlzdCkgPT4gbGlzdC5nZXRJZCgpID09PSBsaXN0SWQpO1xyXG5cclxuICAgIHJldHVybiBsaXN0SW5kZXg7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHsgZ2V0VGl0bGUsIGdldElkLCBnZXRMaXN0cywgY3JlYXRlTGlzdCwgcmVtb3ZlTGlzdCB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUHJvamVjdDtcclxuIiwiaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vUHJvamVjdFwiO1xyXG5pbXBvcnQgcHViU3ViIGZyb20gXCIuL3B1YlN1Yi5qc1wiO1xyXG5pbXBvcnQgc3RvcmUgZnJvbSBcIi4vc3RvcmUuanNcIjtcclxuaW1wb3J0IHsgY3JlYXRlRGVmYXVsdFByb2plY3QgfSBmcm9tIFwiLi9Qcm9qZWN0SGFuZGxlclwiO1xyXG5cclxuZnVuY3Rpb24gc3RvcmFnZUF2YWlsYWJsZSgpIHtcclxuICB0cnkge1xyXG4gICAgdmFyIHN0b3JhZ2UgPSB3aW5kb3dbXCJsb2NhbFN0b3JhZ2VcIl0sXHJcbiAgICAgIHggPSBcIl9fc3RvcmFnZV90ZXN0X19cIjtcclxuICAgIHN0b3JhZ2Uuc2V0SXRlbSh4LCB4KTtcclxuICAgIHN0b3JhZ2UucmVtb3ZlSXRlbSh4KTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiZcclxuICAgICAgLy8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxyXG4gICAgICAoZS5jb2RlID09PSAyMiB8fFxyXG4gICAgICAgIC8vIEZpcmVmb3hcclxuICAgICAgICBlLmNvZGUgPT09IDEwMTQgfHxcclxuICAgICAgICAvLyB0ZXN0IG5hbWUgZmllbGQgdG9vLCBiZWNhdXNlIGNvZGUgbWlnaHQgbm90IGJlIHByZXNlbnRcclxuICAgICAgICAvLyBldmVyeXRoaW5nIGV4Y2VwdCBGaXJlZm94XHJcbiAgICAgICAgZS5uYW1lID09PSBcIlF1b3RhRXhjZWVkZWRFcnJvclwiIHx8XHJcbiAgICAgICAgLy8gRmlyZWZveFxyXG4gICAgICAgIGUubmFtZSA9PT0gXCJOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRFwiKSAmJlxyXG4gICAgICAvLyBhY2tub3dsZWRnZSBRdW90YUV4Y2VlZGVkRXJyb3Igb25seSBpZiB0aGVyZSdzIHNvbWV0aGluZyBhbHJlYWR5IHN0b3JlZFxyXG4gICAgICBzdG9yYWdlICYmXHJcbiAgICAgIHN0b3JhZ2UubGVuZ3RoICE9PSAwXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgX19zdHJpbmdpZnlKU09OID0gKG9iaikgPT4ge1xyXG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmopO1xyXG59O1xyXG5cclxuY29uc3QgcmV0cmlldmVJdGVtID0gKGtleSkgPT4ge1xyXG4gIGNvbnN0IHN0b3JlZFN0cmluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgcmV0dXJuIEpTT04ucGFyc2Uoc3RvcmVkU3RyaW5nKTtcclxufTtcclxuXHJcbi8qXHJcbiAgRGF0YSBTdHJ1Y3R1cmVcclxuICAgbG9jYWxTdG9yYWdlID0ge1xyXG4gICAgcHJvamVjdHM6IFtcclxuICAgICAge3Byb2plY3RUaXRsZSwgaWQsIGxpc3RzOiBbXHJcbiAgICAgICAgeyB0aXRsZSwgaWQsIHRhc2tzOiBbXSB9XHJcbiAgICAgIF19LCBcclxuICAgICAge3Byb2plY3RUaXRsZSwgaWQsIGxpc3RzLi4ufV0sXHJcbiAgICBdfSxcclxuKi9cclxuXHJcbi8vICBQcm9qZWN0IHJldHJpZXZhbCAtIEdldHRlcnNcclxuXHJcbmNvbnN0IGdldFN0b3JlZFByb2plY3RzID0gKCkgPT4ge1xyXG4gIGNvbnN0IHN0b3JlZFN0cmluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHJvamVjdHNcIik7XHJcbiAgY29uc3Qgc3RvcmVkUHJvamVjdHMgPSBKU09OLnBhcnNlKHN0b3JlZFN0cmluZyk7XHJcbiAgcmV0dXJuIHN0b3JlZFByb2plY3RzO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tGb3JQcm9qZWN0cyA9ICgpID0+IHtcclxuICAvLyBVbmNvbW1lbnQgdG8gd2lwZSBzdG9yYWdlXHJcbiAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJwcm9qZWN0c1wiKTtcclxuICBpZiAoIShcInByb2plY3RzXCIgaW4gbG9jYWxTdG9yYWdlKSkge1xyXG4gICAgY29uc29sZS5sb2coXCJJbml0aWFsaXplIHByb2plY3RzIGFycmF5IGluIHN0b3JhZ2VcIik7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KFtdKSk7XHJcbiAgfVxyXG4gIGlmICghcmV0cmlldmVJdGVtKFwicHJvamVjdHNcIikubGVuZ3RoKSB7XHJcbiAgICBjcmVhdGVEZWZhdWx0UHJvamVjdCgpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICAvLyBSZWNvbnN0cnVjdCB0aGUgY3VycmVudCBwcm9qZWN0IGFuZCBzZXQgY3VycmVudFByb2plY3QgaW4gc3RvcmFnZVxyXG4gIHN0b3JlLnNldEN1cnJlbnRQcm9qZWN0KHJlY29uc3RydWN0Q3VycmVudFByb2plY3QoKSk7XHJcbn07XHJcblxyXG5jb25zdCByZWNvbnN0cnVjdEN1cnJlbnRQcm9qZWN0ID0gKCkgPT4ge1xyXG4gIGNvbnN0IHN0b3JlZFByb2plY3RzID0gZ2V0U3RvcmVkUHJvamVjdHMoKTtcclxuICBjb25zdCBjdXJyUHJvakluZGV4ID0gcmV0cmlldmVDdXJyUHJvaklkeCgpO1xyXG4gIGNvbnN0IGN1cnJlbnRQcm9qID0gc3RvcmVkUHJvamVjdHNbY3VyclByb2pJbmRleF07XHJcblxyXG4gIGNvbnN0IHJlY29uc3RydWN0ZWRQcm9qZWN0ID0gUHJvamVjdChjdXJyZW50UHJvai50aXRsZSwgY3VycmVudFByb2ouaWQpO1xyXG4gIHB1YlN1Yi5wdWJsaXNoKFwicHJvamVjdFJlY29uc3RydWN0ZWRcIiwgcmVjb25zdHJ1Y3RlZFByb2plY3QpO1xyXG5cclxuICBfX3JlY29uc3RydWN0TGlzdHMocmVjb25zdHJ1Y3RlZFByb2plY3QsIGN1cnJlbnRQcm9qLmxpc3RzKTtcclxuXHJcbiAgcmV0dXJuIHJlY29uc3RydWN0ZWRQcm9qZWN0O1xyXG59O1xyXG4vLyBJbml0aWFsaXplIHN1YnNjcmlwdGlvbnMgYWZ0ZXIgcmVjb25zdHJ1Y3Rpb25cclxuXHJcbmNvbnN0IF9fcmVjb25zdHJ1Y3RMaXN0cyA9IChwcm9qZWN0LCBsaXN0cykgPT4ge1xyXG4gIGxpc3RzLm1hcCgobGlzdCkgPT4ge1xyXG4gICAgY29uc3QgcmVjb25zdHJ1Y3RlZExpc3QgPSBwcm9qZWN0LmNyZWF0ZUxpc3QobGlzdC50aXRsZSwgbGlzdC5pZCk7XHJcbiAgICBwdWJTdWIucHVibGlzaChcImxpc3RSZWNvbnN0cnVjdGVkXCIsIHJlY29uc3RydWN0ZWRMaXN0KTtcclxuXHJcbiAgICBfX3JlY29uc3RydWN0VGFza3MocmVjb25zdHJ1Y3RlZExpc3QsIGxpc3QudGFza3MpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgX19yZWNvbnN0cnVjdFRhc2tzID0gKGxpc3QsIHRhc2tzKSA9PiB7XHJcbiAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xyXG4gICAgbGlzdC5jcmVhdGVUYXNrKHRhc2sudGl0bGUsIHRhc2suaWQpO1xyXG4gICAgY29uc3QgdXBkYXRlZFRhc2sgPSBsaXN0LnVwZGF0ZVRhc2sodGFzay5pZCwgdGFzayk7XHJcbiAgICBwdWJTdWIucHVibGlzaChcInRhc2tSZWNvbnN0cnVjdGVkXCIsIHsgbGlzdCwgdGFzazogdXBkYXRlZFRhc2sgfSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vLyBJbml0IHJlY29uc3RydWN0aW9uXHJcbi8vIHN0b3JlLnNldFByb2plY3RzKHJlY29uc3RydWN0UHJvamVjdHMoKSk7XHJcblxyXG4vLyBMaXN0ZW4gZm9yIG5ldyBjcmVhdGlvbnMgdG8gYmUgcHV0IGludG8gc3RvcmFnZVxyXG5cclxuLy8gIFByb2plY3QgU3RvcmFnZSAtIFNldHRlclxyXG5cclxucHViU3ViLnN1YnNjcmliZShcInByb2plY3RDcmVhdGVkXCIsIHN0b3JlUHJvamVjdCk7XHJcbnB1YlN1Yi5zdWJzY3JpYmUoXCJsaXN0Q3JlYXRlZFwiLCBzdG9yZUxpc3QpO1xyXG5wdWJTdWIuc3Vic2NyaWJlKFwibGlzdFVwZGF0ZWRcIiwgc3RvcmVVcGRhdGVkTGlzdCk7XHJcbnB1YlN1Yi5zdWJzY3JpYmUoXCJsaXN0RGVsZXRlZFwiLCBkZWxldGVTdG9yZWRMaXN0KTtcclxucHViU3ViLnN1YnNjcmliZShcInRhc2tDcmVhdGVkXCIsIHN0b3JlVGFzayk7XHJcbnB1YlN1Yi5zdWJzY3JpYmUoXCJ0YXNrVXBkYXRlZFwiLCBzdG9yZVVwZGF0ZWRUYXNrKTtcclxucHViU3ViLnN1YnNjcmliZShcInRhc2tEZWxldGVkXCIsIGRlbGV0ZVN0b3JlZFRhc2spO1xyXG5wdWJTdWIuc3Vic2NyaWJlKFwiY3VycmVudFByb2plY3RTZXRcIiwgc3RvcmVDdXJyZW50UHJvamVjdCk7XHJcblxyXG5mdW5jdGlvbiBzdG9yZVByb2plY3QocHJvamVjdCkge1xyXG4gIGNvbnN0IHVwZGF0ZWRQcm9qZWN0cyA9IHJldHJpZXZlSXRlbShcInByb2plY3RzXCIpO1xyXG4gIHVwZGF0ZWRQcm9qZWN0cy5wdXNoKHtcclxuICAgIHRpdGxlOiBwcm9qZWN0LmdldFRpdGxlKCksXHJcbiAgICBpZDogcHJvamVjdC5nZXRJZCgpLFxyXG4gICAgbGlzdHM6IFtdLFxyXG4gIH0pO1xyXG5cclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRQcm9qZWN0cykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdG9yZUxpc3QobGlzdCkge1xyXG4gIGNvbnN0IHVwZGF0ZWRQcm9qZWN0cyA9IHJldHJpZXZlSXRlbShcInByb2plY3RzXCIpO1xyXG4gIGNvbnN0IGluZGV4ID0gcmV0cmlldmVDdXJyUHJvaklkeCgpO1xyXG5cclxuICB1cGRhdGVkUHJvamVjdHNbaW5kZXhdLmxpc3RzLnB1c2goe1xyXG4gICAgdGl0bGU6IGxpc3QuZ2V0VGl0bGUoKSxcclxuICAgIGlkOiBsaXN0LmdldElkKCksXHJcbiAgICB0YXNrczogW10sXHJcbiAgfSk7XHJcblxyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkodXBkYXRlZFByb2plY3RzKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0b3JlVXBkYXRlZExpc3QoZGF0YSkge1xyXG4gIGNvbnN0IHsgbGlzdCwgdGl0bGUgfSA9IGRhdGE7XHJcbiAgY29uc3QgdXBkYXRlZFByb2plY3RzID0gcmV0cmlldmVJdGVtKFwicHJvamVjdHNcIik7XHJcbiAgY29uc3QgaW5kZXggPSByZXRyaWV2ZUN1cnJQcm9qSWR4KCk7XHJcbiAgY29uc3QgcHJvamVjdCA9IHVwZGF0ZWRQcm9qZWN0c1tpbmRleF07XHJcbiAgY29uc3QgbGlzdEluZGV4ID0gcmV0cmlldmVMaXN0SW5kZXgobGlzdC5nZXRJZCgpKTtcclxuICAvLyBVcGRhdGUgbGlzdCBlbnRyeVxyXG4gIHByb2plY3QubGlzdHNbbGlzdEluZGV4XSA9IHsgLi4ucHJvamVjdC5saXN0c1tsaXN0SW5kZXhdLCB0aXRsZSB9O1xyXG5cclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRQcm9qZWN0cykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVTdG9yZWRMaXN0KGxpc3QpIHtcclxuICBjb25zdCB7IHVwZGF0ZWRQcm9qZWN0cywgc3RvcmVkTGlzdCB9ID0gcmV0cmlldmVMaXN0KGxpc3QuZ2V0SWQoKSk7XHJcbiAgY29uc3QgaW5kZXggPSByZXRyaWV2ZUxpc3RJbmRleChsaXN0LmdldElkKCkpO1xyXG4gIHN0b3JlZExpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkUHJvamVjdHMpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RvcmVUYXNrKGRhdGEpIHtcclxuICBjb25zdCB7IGxpc3QsIHRhc2sgfSA9IGRhdGE7XHJcbiAgY29uc3QgdXBkYXRlZFByb2plY3RzID0gcmV0cmlldmVJdGVtKFwicHJvamVjdHNcIik7XHJcbiAgY29uc3Qgc3RvcmVkTGlzdCA9IHJldHJpZXZlU3RvcmVkTGlzdEJ5SWR4KHVwZGF0ZWRQcm9qZWN0cywgbGlzdC5nZXRJZCgpKTtcclxuICBzdG9yZWRMaXN0LnRhc2tzLnB1c2godGFzayk7XHJcblxyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkodXBkYXRlZFByb2plY3RzKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0b3JlVXBkYXRlZFRhc2soZGF0YSkge1xyXG4gIGNvbnN0IHsgbGlzdCwgdGFzayB9ID0gZGF0YTtcclxuICBjb25zdCB1cGRhdGVkUHJvamVjdHMgPSByZXRyaWV2ZUl0ZW0oXCJwcm9qZWN0c1wiKTtcclxuICBjb25zdCBzdG9yZWRMaXN0ID0gcmV0cmlldmVTdG9yZWRMaXN0QnlJZHgodXBkYXRlZFByb2plY3RzLCBsaXN0LmdldElkKCkpO1xyXG4gIGNvbnN0IHN0b3JlZFRhc2tzID0gc3RvcmVkTGlzdC50YXNrcztcclxuICBjb25zdCB0YXNrSW5kZXggPSByZXRyaWV2ZVRhc2tJbmRleChzdG9yZWRUYXNrcywgdGFzay5pZCk7XHJcbiAgc3RvcmVkVGFza3NbdGFza0luZGV4XSA9IHsgLi4uc3RvcmVkVGFza3NbdGFza0luZGV4XSwgLi4udGFzayB9O1xyXG5cclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRQcm9qZWN0cykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVTdG9yZWRUYXNrKGRhdGEpIHtcclxuICBjb25zdCB7IGxpc3QsIHRhc2sgfSA9IGRhdGE7XHJcbiAgY29uc3QgdXBkYXRlZFByb2plY3RzID0gcmV0cmlldmVJdGVtKFwicHJvamVjdHNcIik7XHJcbiAgY29uc3Qgc3RvcmVkTGlzdCA9IHJldHJpZXZlU3RvcmVkTGlzdEJ5SWR4KHVwZGF0ZWRQcm9qZWN0cywgbGlzdC5nZXRJZCgpKTtcclxuICBjb25zdCBzdG9yZWRUYXNrcyA9IHN0b3JlZExpc3QudGFza3M7XHJcbiAgY29uc3QgdGFza0luZGV4ID0gcmV0cmlldmVUYXNrSW5kZXgoc3RvcmVkVGFza3MsIHRhc2suaWQpO1xyXG4gIHN0b3JlZFRhc2tzLnNwbGljZSh0YXNrSW5kZXgsIDEpO1xyXG5cclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRQcm9qZWN0cykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdG9yZUN1cnJlbnRQcm9qZWN0KGRhdGEpIHtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRQcm9qZWN0XCIsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxufVxyXG5cclxuY29uc3QgcmV0cmlldmVTdG9yZWRMaXN0QnlJZHggPSAodXBkYXRlZFByb2plY3RzLCBsaXN0SWQpID0+IHtcclxuICBjb25zdCBwcm9qSW5kZXggPSByZXRyaWV2ZUN1cnJQcm9qSWR4KCk7XHJcbiAgY29uc3QgbGlzdEluZGV4ID0gcmV0cmlldmVMaXN0SW5kZXgobGlzdElkKTtcclxuICBjb25zdCBzdG9yZWRQcm9qZWN0ID0gdXBkYXRlZFByb2plY3RzW3Byb2pJbmRleF07XHJcbiAgY29uc3Qgc3RvcmVkTGlzdCA9IHN0b3JlZFByb2plY3QubGlzdHNbbGlzdEluZGV4XTtcclxuICByZXR1cm4gc3RvcmVkTGlzdDtcclxufTtcclxuXHJcbmNvbnN0IHJldHJpZXZlQ3VyclByb2pJZHggPSAoKSA9PiB7XHJcbiAgY29uc3QgcHJvamVjdHNJblN0b3JhZ2UgPSByZXRyaWV2ZUl0ZW0oXCJwcm9qZWN0c1wiKTtcclxuICBjb25zdCBjdXJyZW50UHJvamVjdCA9IHJldHJpZXZlSXRlbShcImN1cnJlbnRQcm9qZWN0XCIpO1xyXG4gIGNvbnN0IGluZGV4ID0gcHJvamVjdHNJblN0b3JhZ2UuZmluZEluZGV4KFxyXG4gICAgKHByb2plY3QpID0+IHByb2plY3QuaWQgPT09IGN1cnJlbnRQcm9qZWN0LmlkXHJcbiAgKTtcclxuICByZXR1cm4gaW5kZXg7XHJcbn07XHJcblxyXG5jb25zdCByZXRyaWV2ZUxpc3RJbmRleCA9IChpZCkgPT4ge1xyXG4gIGNvbnN0IHByb2plY3RzSW5TdG9yYWdlID0gcmV0cmlldmVJdGVtKFwicHJvamVjdHNcIik7XHJcbiAgY29uc3QgY3VyclByb2pJbmRleCA9IHJldHJpZXZlQ3VyclByb2pJZHgoKTtcclxuICBjb25zdCBsaXN0cyA9IHByb2plY3RzSW5TdG9yYWdlW2N1cnJQcm9qSW5kZXhdLmxpc3RzO1xyXG4gIGNvbnN0IGluZGV4ID0gbGlzdHMuZmluZEluZGV4KChsaXN0KSA9PiBsaXN0LmlkID09PSBpZCk7XHJcbiAgcmV0dXJuIGluZGV4O1xyXG59O1xyXG5cclxuY29uc3QgcmV0cmlldmVMaXN0ID0gKGlkKSA9PiB7XHJcbiAgY29uc3QgdXBkYXRlZFByb2plY3RzID0gcmV0cmlldmVJdGVtKFwicHJvamVjdHNcIik7XHJcbiAgY29uc3QgcHJvakluZGV4ID0gcmV0cmlldmVDdXJyUHJvaklkeCgpO1xyXG4gIGNvbnN0IHByb2plY3QgPSB1cGRhdGVkUHJvamVjdHNbcHJvakluZGV4XTtcclxuICBjb25zdCBzdG9yZWRMaXN0ID0gcHJvamVjdC5saXN0cztcclxuICByZXR1cm4geyB1cGRhdGVkUHJvamVjdHMsIHN0b3JlZExpc3QgfTtcclxufTtcclxuXHJcbmNvbnN0IHJldHJpZXZlVGFza0luZGV4ID0gKGFycmF5LCB0YXNrSWQpID0+IHtcclxuICByZXR1cm4gYXJyYXkuZmluZEluZGV4KCh0YXNrKSA9PiB0YXNrLmlkID09PSB0YXNrSWQpO1xyXG59O1xyXG5cclxuLyogICAgXHJcblxyXG5cclxuICBXZSBuZWVkIHRvIG5vdyByZWNvbnN0cnVjdCB0aGUgb2JqZWN0cyB2aWEgdGhlaXIgZmFjdG9yeSBmdW5jdGlvbnNcclxuICBBbHNvLCBmaWd1cmUgb3V0IGhvdyB0byBleHRyYXBvbGF0ZSBhbmQgc3RvcmUgZGF0YSB3aXRoaW4gdGhlIHNpbXBsZSBkYXRhIHN0cnVjdHVyZSBvZiBsb2NhbFN0b3JhZ2VcclxuXHJcblxyXG4gIEluaXQgLSBcclxuICAgIENoZWNrIGlmIGxvY2FsU3RvcmFnZSBjb250YWlucyBhIHByb2plY3QuXHJcbiAgICAgIElmIG5vIHByb2plY3QgaXMgZm91bmQsIHRoZW4gY3JlYXRlIHRoZSBkZWZhdWx0IHByb2plY3RcclxuXHJcbiAgICAgIElmIGxvY2FsU3RvcmFnZSBjb250YWlucyBhIHByb2plY3QuLi5cclxuICAgICAgICBJbXBvcnQgdGhlIHByb2plY3QgYXJyYXkuXHJcbiAgICAgICAgUmVjb25zdHJ1Y3QgdGhlIFByb2plY3RzXHJcbiAgXHJcbiAgICAgICAgUmVjb25zdHJ1Y3QgdGhlIExpc3RzIHdpdGhpbiB0aGUgUHJvamVjdFxyXG4gICAgICAgIGNvbnN0IHN0b3JlZExpc3RzID0gc3RvcmVkUHJvamVjdHMubWFwKHByb2plY3QgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvamVjdC5saXN0cztcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnN0IHN0b3JlZFRhc2tzID0gc3RvcmVMaXN0cy5tYXAobGlzdCA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gbGlzdC50YXNrc1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGNvbnN0IHN0b3JlZFRhc2tzID0gc3RvcmVkTGlzdHMubWFwKGxpc3QgPT4gbGlzdC5nZXRUYXNrcyk7XHJcbiAgICAgICAgY29uc3QgcmVjb25zdHJ1Y3RMaXN0cyA9IHN0b3JlZFByb2plY3RzLmZvckVhY2goc3RvcmVkUHJvamVjdCA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gc3RvcmVkUHJvamVjdHMubWFwKHByb2plY3QgPT4gcHJvamVjdC4pXHJcbiAgICAgICAgICAgIHJlY29uc3RydWN0ZWRQcm9qZWN0cy5tYXAoUHJvamVjdCA9PiBQcm9qZWN0LmNyZWF0ZUxpc3QodGl0bGUsIGlkKSlcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIFxyXG4qL1xyXG5cclxuZXhwb3J0IHsgcmV0cmlldmVJdGVtLCBjaGVja0ZvclByb2plY3RzLCByZWNvbnN0cnVjdEN1cnJlbnRQcm9qZWN0IH07XHJcbiIsImltcG9ydCBQcm9qZWN0IGZyb20gXCIuL1Byb2plY3QuanNcIjtcclxuaW1wb3J0IHsgY2hlY2tGb3JMaXN0cyB9IGZyb20gXCIuL0xpc3QvTGlzdEhhbmRsZXIuanNcIjtcclxuaW1wb3J0IHsgY3JlYXRlTGlzdCB9IGZyb20gXCIuL0V2ZW50SGFuZGxlci5qc1wiO1xyXG5pbXBvcnQgc3RvcmUgZnJvbSBcIi4vc3RvcmUuanNcIjtcclxuaW1wb3J0IHB1YlN1YiBmcm9tIFwiLi9wdWJTdWIuanNcIjtcclxuaW1wb3J0IHsgcmV0cmlldmVJdGVtLCByZWNvbnN0cnVjdFByb2plY3RzIH0gZnJvbSBcIi4vbG9jYWxTdG9yYWdlSGVscGVyLmpzXCI7XHJcblxyXG5jb25zdCBVc2VySW50ZXJmYWNlID0gKCgpID0+IHtcclxuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlzdC1pbnB1dFwiKTtcclxuXHJcbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRQcm9qZWN0ID0gc3RvcmUuZ2V0Q3VycmVudFByb2plY3QoKTtcclxuXHJcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICBjcmVhdGVMaXN0KGUsIGN1cnJlbnRQcm9qZWN0KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7IGluaXQgfTtcclxufSkoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJJbnRlcmZhY2U7XHJcbiIsImltcG9ydCBQcm9qZWN0IGZyb20gXCIuL1Byb2plY3QuanNcIjtcclxuaW1wb3J0IHB1YlN1YiBmcm9tIFwiLi9wdWJTdWIuanNcIjtcclxuaW1wb3J0IHsgY3JlYXRlRGVmYXVsdExpc3QgfSBmcm9tIFwiLi9MaXN0L0xpc3RIYW5kbGVyXCI7XHJcbmltcG9ydCBzdG9yZSBmcm9tIFwiLi9zdG9yZS5qc1wiO1xyXG5cclxuY29uc3QgY3JlYXRlRGVmYXVsdFByb2plY3QgPSAoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coXCJDcmVhdGluZyBkZWZhdWx0IHByb2plY3RcIik7XHJcbiAgY29uc3QgZGVmYXVsdFByb2plY3QgPSBQcm9qZWN0KFwiRGVmYXVsdFwiKTtcclxuICBzdG9yZS5zZXRDdXJyZW50UHJvamVjdChkZWZhdWx0UHJvamVjdCk7XHJcblxyXG4gIHB1YlN1Yi5wdWJsaXNoKFwicHJvamVjdENyZWF0ZWRcIiwgZGVmYXVsdFByb2plY3QpO1xyXG4gIGNyZWF0ZURlZmF1bHRMaXN0KGRlZmF1bHRQcm9qZWN0KTtcclxuICByZXR1cm4gZGVmYXVsdFByb2plY3Q7XHJcbn07XHJcblxyXG5leHBvcnQgeyBjcmVhdGVEZWZhdWx0UHJvamVjdCB9O1xyXG4iLCJpbXBvcnQgcmVuZGVyTGlzdCBmcm9tIFwiLi9tb2R1bGVzL0xpc3QvTGlzdFJlbmRlcmVyLmpzXCI7XHJcbmltcG9ydCBVc2VySW50ZXJmYWNlIGZyb20gXCIuL21vZHVsZXMvVXNlckludGVyZmFjZS5qc1wiO1xyXG5cclxuaW1wb3J0IHsgY2hlY2tGb3JQcm9qZWN0cyB9IGZyb20gXCIuL21vZHVsZXMvbG9jYWxTdG9yYWdlSGVscGVyLmpzXCI7XHJcblxyXG5jaGVja0ZvclByb2plY3RzKCk7XHJcbmNvbnN0IFVJID0gVXNlckludGVyZmFjZTtcclxuVUkuaW5pdCgpO1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiYXBwZW5kQ3VzdG9tRWxlbWVudCIsImNyZWF0ZUN1c3RvbUVsZW1lbnQiLCJvcHRpb25zIiwidGFnTmFtZSIsImNsYXNzTGlzdCIsInRleHRDb250ZW50IiwiYXR0cmlidXRlcyIsImVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhZGQiLCJBcnJheSIsImlzQXJyYXkiLCJhdHRyIiwic2V0QXR0cmlidXRlIiwidGFyZ2V0IiwidGFyZ2V0RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhcHBlbmRDaGlsZCIsImN1c3RvbUVsZW1lbnRIZWxwZXIiLCJkYXRlU3RyaW5nIiwiZGF0ZSIsIkRhdGUiLCJzZXRIb3VycyIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIm1vbnRoIiwiZGF5IiwieWVhciIsImNvbmZpZyIsInRvb2xzIiwiY3JlYXRlVG9vbGJhciIsInRvb2xiYXJDb250YWluZXIiLCJhcHBlbmQiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJmb3JFYWNoIiwidG9vbCIsIm5hbWUiLCJpbWdTcmMiLCJjbGFzc05hbWUiLCJvbkNsaWNrIiwiYnRuIiwiaW1nIiwib25jbGljayIsIl9fY3JlYXRlQnRucyIsImV2ZW50cyIsImdldEV2ZW50cyIsInN1YnNjcmliZSIsImV2ZW50IiwiY2FsbGJhY2siLCJpbmRleCIsImNvbnNvbGUiLCJsb2ciLCJwdXNoIiwidW5zdWJzY3JpYmUiLCJzcGxpY2UiLCJwdWJsaXNoIiwiZGF0YSIsIm1hcCIsImNhbmNlbEZvcm0iLCJlIiwidGFzayIsInByZXZlbnREZWZhdWx0IiwiZm9ybSIsImNsb3Nlc3QiLCJ0YXNrQ29udGFpbmVyIiwicGFyZW50Tm9kZSIsIm1haW5EZXRhaWxzIiwicmVtb3ZlIiwibWFpbkRldGFpbHNFbGVtZW50cyIsImNyZWF0ZU1haW5EZXRhaWxzRWxlbWVudHMiLCJjdXJyZW50TGlzdCIsInRhc2tJZCIsIl9fY3JlYXRlRm9ybUVsZW1lbnRzIiwidGl0bGUiLCJzdHlsZSIsIndvcmRCcmVhayIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJ2YWx1ZUFzRGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZGlmZmljdWx0eSIsIm9wdGlvbkVsZW1lbnRzIiwib3B0aW9uIiwib3B0aW9uRWxlbWVudCIsInNlbGVjdGVkIiwiZm9ybUJ1dHRvbnMiLCJfX2NyZWF0ZUZvcm1CdXR0b25zIiwiZGl2Iiwic3VibWl0QnRuIiwiY2FuY2VsQnRuIiwiZ2V0VGFza0J5SWQiLCJhcHBlbmRFZGl0VGFza0Zvcm0iLCJlZGl0Rm9ybSIsImlkIiwibGlzdCIsImJvdHRvbVBhbmVsIiwiRm9ybURhdGEiLCJuZXdWYWx1ZXMiLCJ1cGRhdGVkVGFzayIsInVwZGF0ZVRhc2siLCJyZXBsYWNlQ2hpbGRyZW4iLCJib3R0b21QYW5lbEVsZW1lbnRzIiwiY3JlYXRlQm90dG9tUGFuZWxFbGVtZW50cyIsInN1Ym1pdEZvcm0iLCJfX2NyZWF0ZUVkaXRUYXNrRm9ybSIsImV2ZW50SGFuZGxlciIsInNldEVkaXRNb2RlIiwidGFza0VsZW1lbnQiLCJjb250YWlucyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidGV4dGFyZWEiLCJzaGlmdEtleSIsInN1Ym1pdEV2ZW50IiwiRXZlbnQiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImRpc3BhdGNoRXZlbnQiLCJzZXRQcmlvcml0eSIsInByaW9yaXR5Iiwic3JjIiwidG9nZ2xlIiwiZGVsZXRlVGFzayIsInJlbW92ZVRhc2siLCJyZW5kZXJUYXNrIiwiX19hcHBlbmRUYXNrRWxlbWVudHMiLCJ0YXNrc0NvbnRhaW5lciIsImdldElkIiwidGFza0VsZW1lbnRzIiwiX19jcmVhdGVUYXNrRWxlbWVudHMiLCJwcmVwZW5kIiwiZGF0YXNldCIsInRvb2xiYXIiLCJfX3JlbmRlck1haW5EZXRhaWxzIiwiX19yZW5kZXJCb3R0b21QYW5lbCIsImVkaXRUYXNrIiwidG9nZ2xlRGV0YWlscyIsInN0b3BQcm9wYWdhdGlvbiIsIm9wYWNpdHkiLCJ2aXNpYmlsaXR5IiwibWFpbkRldGFpbHNDb250YWluZXIiLCJkaWZmaWN1bHR5RWwiLCJnZXRUYXNrRGlmZmljdWx0eSIsImR1ZURhdGVFbCIsImNyZWF0ZUxpc3QiLCJjdXJyZW50UHJvamVjdCIsIm5ld0xpc3QiLCJjcmVhdGVUYXNrIiwibmV3VGFzayIsImF1dG9SZXNpemUiLCJ0aGlzIiwiaGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiZWwiLCJwcmV2aW91cyIsImNsb25lTm9kZSIsImlucHV0IiwiY3VycmVudFRhc2siLCJyZXBsYWNlV2l0aCIsImJsdXIiLCJvbmNlIiwiZm9jdXMiLCJleHBhbmRlZERldGFpbHMiLCJleHBhbmRlZFRhc2siLCJleHBhbmRlZERpdiIsIl9fY3JlYXRlRXhwYW5kZWRUYXNrIiwiYWZ0ZXIiLCJyZW5kZXJFeHBhbmRlZFRhc2siLCJlZGl0VGl0bGUiLCJnZXRUaXRsZSIsInNhdmUiLCJzZXRUaXRsZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRDdXJyZW50UHJvamVjdCIsInNldEN1cnJlbnRQcm9qZWN0IiwicHJvamVjdCIsImRlbGV0ZUxpc3QiLCJyZW1vdmVkTGlzdCIsInJlbW92ZUxpc3QiLCJyZW5kZXJMaXN0IiwiX19hcHBlbmRMaXN0Q29udGFpbmVyIiwiX19hcHBlbmRUb29sYmFyIiwiX19hcHBlbmRUaXRsZUVsZW1lbnQiLCJfX2FwcGVuZFRhc2tDb250YWluZXIiLCJsaXN0RWxlbWVudCIsIl9fY3JlYXRlVGFza0Zvcm0iLCJ0YXNrRm9ybSIsInRhc2tJbnB1dCIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJzbGljZSIsImxpc3RUaXRsZSIsInRhc2tzIiwidGFza01hbmFnZXIiLCJ0YXNrTGlzdCIsImdldFRhc2tCeUluZGV4IiwiZmluZEluZGV4IiwiZmluZCIsImxlbmd0aCIsInVwZGF0ZWRFbnRyeSIsInRhc2tJbmRleCIsIm5ld1RpdGxlIiwiZ2V0VGFza3MiLCJsaXN0cyIsImdldExpc3RzIiwibGlzdElkIiwiX19nZXRMaXN0SW5kZXgiLCJlbnRyeSIsInJldHJpZXZlSXRlbSIsInN0b3JlZFN0cmluZyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJfX3JlY29uc3RydWN0TGlzdHMiLCJyZWNvbnN0cnVjdGVkTGlzdCIsIl9fcmVjb25zdHJ1Y3RUYXNrcyIsInVwZGF0ZWRQcm9qZWN0cyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJyZXRyaWV2ZUN1cnJQcm9qSWR4IiwibGlzdEluZGV4IiwicmV0cmlldmVMaXN0SW5kZXgiLCJzdG9yZWRMaXN0IiwicmV0cmlldmVMaXN0IiwicmV0cmlldmVTdG9yZWRMaXN0QnlJZHgiLCJzdG9yZWRUYXNrcyIsInJldHJpZXZlVGFza0luZGV4IiwicHJvakluZGV4IiwicHJvamVjdHNJblN0b3JhZ2UiLCJhcnJheSIsImluaXQiLCJjdXJyZW50UHJvaiIsImdldFN0b3JlZFByb2plY3RzIiwicmVjb25zdHJ1Y3RlZFByb2plY3QiLCJyZWNvbnN0cnVjdEN1cnJlbnRQcm9qZWN0IiwiZGVmYXVsdFByb2plY3QiLCJoYWJpdExpc3QiLCJmaXJzdFRhc2siLCJjcmVhdGVEZWZhdWx0TGlzdCIsImNyZWF0ZURlZmF1bHRQcm9qZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==